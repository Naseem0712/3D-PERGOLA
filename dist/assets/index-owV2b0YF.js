const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/pdf-xEu60Z-2.js","assets/vendor-BuMwCzF7.js"])))=>i.map(i=>d[i]);
import{r as e,D as t,j as s,B as i,C as a,a as n,V as r,R as l,b as o,P as c,E as d,O as m,_ as h,c as u}from"./vendor-BuMwCzF7.js";import{m as x,A as g}from"./ui-DWE_iSZ0.js";import{E as p,h as b}from"./pdf-xEu60Z-2.js";function w({title:t,titleId:s,...i},a){return e.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":s},i),t?e.createElement("title",{id:s},t):null,e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"}))}!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const s of e)if("childList"===s.type)for(const e of s.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const f=e.forwardRef(w);function v({title:t,titleId:s,...i},a){return e.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":s},i),t?e.createElement("title",{id:s},t):null,e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 4.5 21 12m0 0-7.5 7.5M21 12H3"}))}const j=e.forwardRef(v);function y({title:t,titleId:s,...i},a){return e.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":s},i),t?e.createElement("title",{id:s},t):null,e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 15 3 9m0 0 6-6M3 9h12a6 6 0 0 1 0 12h-3"}))}const N=e.forwardRef(y);function k({title:t,titleId:s,...i},a){return e.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":s},i),t?e.createElement("title",{id:s},t):null,e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 3.75v4.5m0-4.5h4.5m-4.5 0L9 9M3.75 20.25v-4.5m0 4.5h4.5m-4.5 0L9 15M20.25 3.75h-4.5m4.5 0v4.5m0-4.5L15 9m5.25 11.25h-4.5m4.5 0v-4.5m0 4.5L15 15"}))}const C=e.forwardRef(k);function S({title:t,titleId:s,...i},a){return e.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":s},i),t?e.createElement("title",{id:s},t):null,e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.827 6.175A2.31 2.31 0 0 1 5.186 7.23c-.38.054-.757.112-1.134.175C2.999 7.58 2.25 8.507 2.25 9.574V18a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9.574c0-1.067-.75-1.994-1.802-2.169a47.865 47.865 0 0 0-1.134-.175 2.31 2.31 0 0 1-1.64-1.055l-.822-1.316a2.192 2.192 0 0 0-1.736-1.039 48.774 48.774 0 0 0-5.232 0 2.192 2.192 0 0 0-1.736 1.039l-.821 1.316Z"}),e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 12.75a4.5 4.5 0 1 1-9 0 4.5 4.5 0 0 1 9 0ZM18.75 10.5h.008v.008h-.008V10.5Z"}))}const L=e.forwardRef(S);function M({title:t,titleId:s,...i},a){return e.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":s},i),t?e.createElement("title",{id:s},t):null,e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75ZM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625ZM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125Z"}))}const P=e.forwardRef(M);function D({title:t,titleId:s,...i},a){return e.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":s},i),t?e.createElement("title",{id:s},t):null,e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const F=e.forwardRef(D);function E({title:t,titleId:s,...i},a){return e.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":s},i),t?e.createElement("title",{id:s},t):null,e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5 8.25 12l7.5-7.5"}))}const T=e.forwardRef(E);function R({title:t,titleId:s,...i},a){return e.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":s},i),t?e.createElement("title",{id:s},t):null,e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"}))}const z=e.forwardRef(R);function B({title:t,titleId:s,...i},a){return e.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":s},i),t?e.createElement("title",{id:s},t):null,e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9.75v6.75m0 0-3-3m3 3 3-3m-8.25 6a4.5 4.5 0 0 1-1.41-8.775 5.25 5.25 0 0 1 10.233-2.33 3 3 0 0 1 3.758 3.848A3.752 3.752 0 0 1 18 19.5H6.75Z"}))}const I=e.forwardRef(B);function V({title:t,titleId:s,...i},a){return e.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":s},i),t?e.createElement("title",{id:s},t):null,e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 15a4.5 4.5 0 0 0 4.5 4.5H18a3.75 3.75 0 0 0 1.332-7.257 3 3 0 0 0-3.758-3.848 5.25 5.25 0 0 0-10.233 2.33A4.502 4.502 0 0 0 2.25 15Z"}))}const W=e.forwardRef(V);function A({title:t,titleId:s,...i},a){return e.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":s},i),t?e.createElement("title",{id:s},t):null,e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 7.5-9-5.25L3 7.5m18 0-9 5.25m9-5.25v9l-9 5.25M3 7.5l9 5.25M3 7.5v9l9 5.25m0-9v9"}))}const O=e.forwardRef(A);function $({title:t,titleId:s,...i},a){return e.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":s},i),t?e.createElement("title",{id:s},t):null,e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))}const _=e.forwardRef($);function G({title:t,titleId:s,...i},a){return e.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":s},i),t?e.createElement("title",{id:s},t):null,e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"}))}const H=e.forwardRef(G);function U({title:t,titleId:s,...i},a){return e.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":s},i),t?e.createElement("title",{id:s},t):null,e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.98 8.223A10.477 10.477 0 0 0 1.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.451 10.451 0 0 1 12 4.5c4.756 0 8.773 3.162 10.065 7.498a10.522 10.522 0 0 1-4.293 5.774M6.228 6.228 3 3m3.228 3.228 3.65 3.65m7.894 7.894L21 21m-3.228-3.228-3.65-3.65m0 0a3 3 0 1 0-4.243-4.243m4.242 4.242L9.88 9.88"}))}const q=e.forwardRef(U);function Z({title:t,titleId:s,...i},a){return e.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":s},i),t?e.createElement("title",{id:s},t):null,e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"}),e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const J=e.forwardRef(Z);function Q({title:t,titleId:s,...i},a){return e.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":s},i),t?e.createElement("title",{id:s},t):null,e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12Z"}))}const Y=e.forwardRef(Q);function X({title:t,titleId:s,...i},a){return e.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":s},i),t?e.createElement("title",{id:s},t):null,e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 18v-5.25m0 0a6.01 6.01 0 0 0 1.5-.189m-1.5.189a6.01 6.01 0 0 1-1.5-.189m3.75 7.478a12.06 12.06 0 0 1-4.5 0m3.75 2.383a14.406 14.406 0 0 1-3 0M14.25 18v-.192c0-.983.658-1.823 1.508-2.316a7.5 7.5 0 1 0-7.517 0c.85.493 1.509 1.333 1.509 2.316V18"}))}const K=e.forwardRef(X);function ee({title:t,titleId:s,...i},a){return e.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":s},i),t?e.createElement("title",{id:s},t):null,e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 18.75a6 6 0 0 0 6-6v-1.5m-6 7.5a6 6 0 0 1-6-6v-1.5m6 7.5v3.75m-3.75 0h7.5M12 15.75a3 3 0 0 1-3-3V4.5a3 3 0 1 1 6 0v8.25a3 3 0 0 1-3 3Z"}))}const te=e.forwardRef(ee);function se({title:t,titleId:s,...i},a){return e.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":s},i),t?e.createElement("title",{id:s},t):null,e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.752 15.002A9.72 9.72 0 0 1 18 15.75c-5.385 0-9.75-4.365-9.75-9.75 0-1.33.266-2.597.748-3.752A9.753 9.753 0 0 0 3 11.25C3 16.635 7.365 21 12.75 21a9.753 9.753 0 0 0 9.002-5.998Z"}))}const ie=e.forwardRef(se);function ae({title:t,titleId:s,...i},a){return e.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":s},i),t?e.createElement("title",{id:s},t):null,e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.813 15.904 9 18.75l-.813-2.846a4.5 4.5 0 0 0-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 0 0 3.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 0 0 3.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 0 0-3.09 3.09ZM18.259 8.715 18 9.75l-.259-1.035a3.375 3.375 0 0 0-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 0 0 2.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 0 0 2.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 0 0-2.456 2.456ZM16.894 20.567 16.5 21.75l-.394-1.183a2.25 2.25 0 0 0-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 0 0 1.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 0 0 1.423 1.423l1.183.394-1.183.394a2.25 2.25 0 0 0-1.423 1.423Z"}))}const ne=e.forwardRef(ae);function re({title:t,titleId:s,...i},a){return e.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":s},i),t?e.createElement("title",{id:s},t):null,e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 7.5A2.25 2.25 0 0 1 7.5 5.25h9a2.25 2.25 0 0 1 2.25 2.25v9a2.25 2.25 0 0 1-2.25 2.25h-9a2.25 2.25 0 0 1-2.25-2.25v-9Z"}))}const le=e.forwardRef(re);function oe({title:t,titleId:s,...i},a){return e.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":s},i),t?e.createElement("title",{id:s},t):null,e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3v2.25m6.364.386-1.591 1.591M21 12h-2.25m-.386 6.364-1.591-1.591M12 18.75V21m-4.773-4.227-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0Z"}))}const ce=e.forwardRef(oe);function de({title:t,titleId:s,...i},a){return e.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":s},i),t?e.createElement("title",{id:s},t):null,e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.098 19.902a3.75 3.75 0 0 0 5.304 0l6.401-6.402M6.75 21A3.75 3.75 0 0 1 3 17.25V4.125C3 3.504 3.504 3 4.125 3h5.25c.621 0 1.125.504 1.125 1.125v4.072M6.75 21a3.75 3.75 0 0 0 3.75-3.75V8.197M6.75 21h13.125c.621 0 1.125-.504 1.125-1.125v-5.25c0-.621-.504-1.125-1.125-1.125h-4.072M10.5 8.197l2.88-2.88c.438-.439 1.15-.439 1.59 0l3.712 3.713c.44.44.44 1.152 0 1.59l-2.879 2.88M6.75 17.25h.008v.008H6.75v-.008Z"}))}const me=e.forwardRef(de);function he({title:t,titleId:s,...i},a){return e.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":s},i),t?e.createElement("title",{id:s},t):null,e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))}const ue=e.forwardRef(he);function xe({title:t,titleId:s,...i},a){return e.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":s},i),t?e.createElement("title",{id:s},t):null,e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))}const ge=e.forwardRef(xe),pe=e.forwardRef((({dimensions:l={width:3,length:4,height:2.5},material:o="aluminium",materialColor:c="#a8a8a8",pillars:d={count:4,size:{width:.1,depth:.1},positions:[],visible:[!0,!0,!0,!0]},rafters:m={frontToBack:{count:5,width:.05,height:.1,visible:!0,shape:"square",items:[]},leftToRight:{count:5,width:.05,height:.1,visible:!0,shape:"square",items:[]},pattern:"crosshatch",style:"straight",visible:!0},glass:h={visible:!1,applied:!1,color:"#a9c2d9",opacity:.6,thickness:.8,extension:.1,position:{x:0,y:0,z:0},sides:{top:!0,front:!0,back:!0,left:!0,right:!0,bottom:!0}},pergolaPosition:u={x:0,y:0,z:0},onRafterSelect:x=()=>{}},g)=>{const p=e.useRef();e.useImperativeHandle(g,(()=>({getObject3D:()=>p.current})));const b=e.useMemo((()=>{let e={roughness:.5,metalness:.5,color:c||"#a8a8a8"};switch(o){case"iron":e.metalness=.8,e.roughness=.3;break;case"aluminium":e.metalness=.6,e.roughness=.4;break;case"wpc":e.metalness=.1,e.roughness=.7;break;case"wood":e.metalness=0,e.roughness=.8}return e}),[o,c]);e.useMemo((()=>({color:h.color||"#a9c2d9",roughness:.1,metalness:.2,transparent:!0,opacity:h.opacity||.6,transmission:.8,thickness:(h.thickness||.8)/100,envMapIntensity:1.5,side:t,depthWrite:!1})),[h.color,h.opacity,h.thickness]);const w=e.useMemo((()=>{const e=[[-l.length/2,0,-l.width/2],[l.length/2,0,-l.width/2],[-l.length/2,0,l.width/2],[l.length/2,0,l.width/2]];if(d.count>4){const t=d.count-4,s=Math.floor(t/4),i=t%4,a=[];for(let e=1;e<=s;e++){const t=e/(s+1);a.push([-l.length/2+l.length*t,0,-l.width/2])}for(let e=1;e<=s;e++){const t=e/(s+1);a.push([l.length/2,0,-l.width/2+l.width*t])}for(let e=1;e<=s;e++){const t=e/(s+1);a.push([-l.length/2+l.length*t,0,l.width/2])}for(let e=1;e<=s;e++){const t=e/(s+1);a.push([-l.length/2,0,-l.width/2+l.width*t])}for(let e=1;e<=i;e++){const t=e/(i+1);a.push([-l.length/2+l.length*t,0,-l.width/2])}return[...e,...a]}return e}),[l,d.count]),f=e=>{var t,s;((null==(t=m.frontToBack.items.find((t=>t.id===e)))?void 0:t.selected)||(null==(s=m.leftToRight.items.find((t=>t.id===e)))?void 0:s.selected))&&x(e)};return s.jsxs("group",{ref:p,position:[u.x,u.y,u.z],children:[s.jsxs("mesh",{position:[l.length/2,-.01,l.width/2],rotation:[-Math.PI/2,0,0],receiveShadow:!0,children:[s.jsx("planeGeometry",{args:[l.length+2,l.width+2]}),s.jsx("meshStandardMaterial",{color:"#e0e0e0",roughness:.8,metalness:.2})]}),w.map(((e,t)=>!(t<d.visible.length)||d.visible[t]?s.jsxs("mesh",{position:[e[0],e[1]+l.height/2,e[2]],castShadow:!0,receiveShadow:!0,children:[s.jsx("boxGeometry",{args:[d.size.width,l.height,d.size.depth]}),s.jsx("meshStandardMaterial",{...b})]},`pillar-${t}`):null)),[-l.width/2,l.width/2].map(((e,t)=>s.jsxs("mesh",{position:[0,l.height,e],castShadow:!0,receiveShadow:!0,children:[s.jsx("boxGeometry",{args:[l.length,1.5*m.frontToBack.height,m.frontToBack.width]}),s.jsx("meshStandardMaterial",{...b})]},`beam-${t}`))),[-l.length/2,l.length/2].map(((e,t)=>s.jsxs("mesh",{position:[e,l.height,0],castShadow:!0,receiveShadow:!0,children:[s.jsx("boxGeometry",{args:[m.leftToRight.width,1.5*m.leftToRight.height,l.width]}),s.jsx("meshStandardMaterial",{...b})]},`side-beam-${t}`))),(()=>{if(!m.visible||"none"===m.style)return null;const e=(()=>{if(!m.frontToBack.visible||m.frontToBack.count<=0)return[];const e=m.frontToBack.gap||.2,t=l.width*(1-.1*e),o=t/Math.max(1,m.frontToBack.count),d=(l.width-t)/2;return Array.from({length:m.frontToBack.count}).map(((e,t)=>{var h,u,x,g,p,w;const v=-l.width/2+d+o*(t+.5),j=l.length;if(!1===(null==(h=m.frontToBack.items[t])?void 0:h.visible))return null;const y=(null==(u=m.frontToBack.items[t])?void 0:u.curvature)||0,N=l.height;return s.jsx("group",{position:[0,N,v],children:0===y?"square"===m.frontToBack.shape?s.jsx(i,{args:[j,m.frontToBack.height,m.frontToBack.width],position:[0,m.frontToBack.height/2,0],onClick:()=>f(`front-back-rafter-${t}`),children:s.jsx("meshStandardMaterial",{color:(null==(x=m.frontToBack.items[t])?void 0:x.selected)?"#FFD700":c,...b})}):s.jsx(a,{args:[m.frontToBack.width/2,m.frontToBack.width/2,j,32],position:[0,m.frontToBack.height/2,0],rotation:[0,0,Math.PI/2],onClick:()=>f(`front-back-rafter-${t}`),children:s.jsx("meshStandardMaterial",{color:(null==(g=m.frontToBack.items[t])?void 0:g.selected)?"#FFD700":c,...b})}):"square"===m.frontToBack.shape?s.jsxs("mesh",{onClick:()=>f(`front-back-rafter-${t}`),children:[s.jsx("tubeGeometry",{args:[new n([new r(-j/2,m.frontToBack.height/2,0),new r(0,m.frontToBack.height/2+y,0),new r(j/2,m.frontToBack.height/2,0)]),64,m.frontToBack.width/2,8,!1]}),s.jsx("meshStandardMaterial",{color:(null==(p=m.frontToBack.items[t])?void 0:p.selected)?"#FFD700":c,...b})]}):s.jsxs("mesh",{onClick:()=>f(`front-back-rafter-${t}`),children:[s.jsx("tubeGeometry",{args:[new n([new r(-j/2,m.frontToBack.height/2,0),new r(0,m.frontToBack.height/2+y,0),new r(j/2,m.frontToBack.height/2,0)]),64,m.frontToBack.width/2,16,!1]}),s.jsx("meshStandardMaterial",{color:(null==(w=m.frontToBack.items[t])?void 0:w.selected)?"#FFD700":c,...b})]})},`front-back-rafter-${t}`)})).filter(Boolean)})(),t=(()=>{if(!m.leftToRight.visible||m.leftToRight.count<=0)return[];const e=m.leftToRight.gap||.2,t=l.length*(1-.1*e),o=t/Math.max(1,m.leftToRight.count),d=(l.length-t)/2;return Array.from({length:m.leftToRight.count}).map(((e,t)=>{var h,u,x,g,p,w;const v=-l.length/2+d+o*(t+.5),j=l.width;if(!1===(null==(h=m.leftToRight.items[t])?void 0:h.visible))return null;const y=(null==(u=m.leftToRight.items[t])?void 0:u.curvature)||0,N=l.height;return s.jsx("group",{position:[v,N,0],children:0===y?"square"===m.leftToRight.shape?s.jsx(i,{args:[m.leftToRight.width,m.leftToRight.height,j],position:[0,m.leftToRight.height/2,0],onClick:()=>f(`left-right-rafter-${t}`),children:s.jsx("meshStandardMaterial",{color:(null==(x=m.leftToRight.items[t])?void 0:x.selected)?"#FFD700":c,...b})}):s.jsx(a,{args:[m.leftToRight.width/2,m.leftToRight.width/2,j,32],position:[0,m.leftToRight.height/2,0],rotation:[Math.PI/2,0,0],onClick:()=>f(`left-right-rafter-${t}`),children:s.jsx("meshStandardMaterial",{color:(null==(g=m.leftToRight.items[t])?void 0:g.selected)?"#FFD700":c,...b})}):"square"===m.leftToRight.shape?s.jsxs("mesh",{onClick:()=>f(`left-right-rafter-${t}`),children:[s.jsx("tubeGeometry",{args:[new n([new r(0,m.leftToRight.height/2,-j/2),new r(0,m.leftToRight.height/2+y,0),new r(0,m.leftToRight.height/2,j/2)]),64,m.leftToRight.width/2,8,!1]}),s.jsx("meshStandardMaterial",{color:(null==(p=m.leftToRight.items[t])?void 0:p.selected)?"#FFD700":c,...b})]}):s.jsxs("mesh",{onClick:()=>f(`left-right-rafter-${t}`),children:[s.jsx("tubeGeometry",{args:[new n([new r(0,m.leftToRight.height/2,-j/2),new r(0,m.leftToRight.height/2+y,0),new r(0,m.leftToRight.height/2,j/2)]),64,m.leftToRight.width/2,16,!1]}),s.jsx("meshStandardMaterial",{color:(null==(w=m.leftToRight.items[t])?void 0:w.selected)?"#FFD700":c,...b})]})},`left-right-rafter-${t}`)})).filter(Boolean)})();return m.pattern,"crosshatch"===m.pattern?[...e,...t]:m.frontToBack.visible?e:t})(),(()=>{var e,t,i,a,n,r,o,c,d;if(!h.visible||!h.applied)return null;const u=h.extension||0,x=Math.max(.003,(h.thickness||.8)/100),g=l.length+2*u,p=l.width+2*u,b=l.length/2,w=l.width/2,f=Math.max(m.frontToBack.height||.1,m.leftToRight.height||.1),v=l.height+f,j=(null==(e=h.position)?void 0:e.x)||0,y=(null==(t=h.position)?void 0:t.y)||0,N=(null==(i=h.position)?void 0:i.z)||0,k=v+y,C={color:h.color||"#a9c2d9",opacity:h.opacity||.6,transparent:!0,roughness:.1,clearcoat:1,clearcoatRoughness:.1,transmission:.9,thickness:100*x,envMapIntensity:1,ior:1.5};return s.jsxs(s.Fragment,{children:[!1!==(null==(a=h.sides)?void 0:a.top)&&s.jsxs("mesh",{position:[b+j,k,w+N],receiveShadow:!0,children:[s.jsx("boxGeometry",{args:[g,x,p]}),s.jsx("meshPhysicalMaterial",{...C})]}),(null==(n=h.sides)?void 0:n.front)&&s.jsxs("mesh",{position:[b+j,v/2+y,0-u+N],receiveShadow:!0,children:[s.jsx("boxGeometry",{args:[g,v,x]}),s.jsx("meshPhysicalMaterial",{...C})]}),(null==(r=h.sides)?void 0:r.back)&&s.jsxs("mesh",{position:[b+j,v/2+y,l.width+u+N],receiveShadow:!0,children:[s.jsx("boxGeometry",{args:[g,v,x]}),s.jsx("meshPhysicalMaterial",{...C})]}),(null==(o=h.sides)?void 0:o.left)&&s.jsxs("mesh",{position:[0-u+j,v/2+y,w+N],receiveShadow:!0,children:[s.jsx("boxGeometry",{args:[x,v,p]}),s.jsx("meshPhysicalMaterial",{...C})]}),(null==(c=h.sides)?void 0:c.right)&&s.jsxs("mesh",{position:[l.length+u+j,v/2+y,w+N],receiveShadow:!0,children:[s.jsx("boxGeometry",{args:[x,v,p]}),s.jsx("meshPhysicalMaterial",{...C})]}),(null==(d=h.sides)?void 0:d.bottom)&&s.jsxs("mesh",{position:[b+j,0+y,w+N],receiveShadow:!0,children:[s.jsx("boxGeometry",{args:[g,x,p]}),s.jsx("meshPhysicalMaterial",{...C})]})]})})()]})})),be=({isOpen:t,onClose:i,onApplyDesign:a,currentDesign:n,previewPositions:r=[{name:"Front View",position:[0,2.5,8],target:[0,1.25,0]},{name:"Side View",position:[8,2.5,0],target:[0,1.25,0]},{name:"Top View",position:[0,8,0],target:[0,0,0]},{name:"Perspective",position:[6,4,6],target:[0,1,0]}]})=>{const l=[{name:"Modern Minimalist",description:"Clean lines and minimalist aesthetic with aluminum frame",dimensions:{length:4,width:3,height:2.5},material:"aluminium",materialColor:"#a8a8a8",pillars:{count:4,size:{width:.1,depth:.1}},rafters:{pattern:"crosshatch",frontToBack:{count:6,width:.05,height:.1},leftToRight:{count:6,width:.05,height:.1}},glass:{visible:!0,applied:!0,color:"#a9c2d9",opacity:.6,sides:{top:!0,front:!1,back:!1,left:!1,right:!1}}},{name:"Classic Wooden",description:"Traditional wooden pergola with warm tones",dimensions:{length:4.5,width:3.5,height:2.7},material:"wood",materialColor:"#8B4513",pillars:{count:4,size:{width:.15,depth:.15}},rafters:{pattern:"parallel",frontToBack:{count:8,width:.08,height:.12},leftToRight:{count:0,width:.08,height:.12}},glass:{visible:!1,applied:!1,color:"#a9c2d9",opacity:.6,sides:{top:!1,front:!1,back:!1,left:!1,right:!1}}},{name:"Luxury Glass",description:"Premium design with extensive glass features",dimensions:{length:5,width:4,height:3},material:"aluminium",materialColor:"#2c3e50",pillars:{count:4,size:{width:.12,depth:.12}},rafters:{pattern:"crosshatch",frontToBack:{count:7,width:.06,height:.1},leftToRight:{count:7,width:.06,height:.1}},glass:{visible:!0,applied:!0,color:"#a9c2d9",opacity:.7,sides:{top:!0,front:!0,back:!0,left:!0,right:!0}}},{name:"Compact Urban",description:"Space-efficient design for urban settings",dimensions:{length:3,width:2.5,height:2.3},material:"aluminium",materialColor:"#34495e",pillars:{count:4,size:{width:.08,depth:.08}},rafters:{pattern:"crosshatch",frontToBack:{count:5,width:.04,height:.08},leftToRight:{count:5,width:.04,height:.08}},glass:{visible:!0,applied:!0,color:"#a9c2d9",opacity:.5,sides:{top:!0,front:!1,back:!1,left:!1,right:!1}}}],[o,c]=e.useState(0),[d,m]=e.useState(!1),h=e.useRef(null);e.useEffect((()=>{const e=e=>{if(t)switch(e.key){case"ArrowLeft":u();break;case"ArrowRight":g();break;case"Escape":i()}};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)}),[t,o]);const u=()=>{c((e=>0===e?l.length-1:e-1))},g=()=>{c((e=>e===l.length-1?0:e+1))};return t?s.jsx(x.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80",onClick:i,children:s.jsxs(x.div,{ref:h,initial:{scale:.9,y:20},animate:{scale:1,y:0},exit:{scale:.9,y:20},className:"bg-gradient-to-b from-gray-900 to-black rounded-xl overflow-hidden shadow-2xl "+(d?"fixed inset-0 rounded-none":"max-w-4xl w-full mx-4"),onClick:e=>e.stopPropagation(),children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-white/10",children:[s.jsx("h2",{className:"text-xl font-medium text-white",children:"Quick Preview"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("button",{onClick:()=>{m(!d)},className:"p-2 rounded-lg hover:bg-white/10 transition-colors",children:s.jsx(C,{className:"w-5 h-5 text-white"})}),s.jsx("button",{onClick:i,className:"p-2 rounded-lg hover:bg-white/10 transition-colors",children:s.jsx(ge,{className:"w-5 h-5 text-white"})})]})]}),s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"relative aspect-video bg-gray-800 rounded-lg overflow-hidden mb-6",children:[s.jsx("div",{className:"absolute inset-0 flex items-center justify-center",style:{backgroundImage:`linear-gradient(135deg, \n                  ${"Modern Minimalist"===l[o].name?"#3b82f6, #1e40af":"Classic Wooden"===l[o].name?"#92400e, #713f12":"Luxury Glass"===l[o].name?"#0ea5e9, #0c4a6e":"Compact Urban"===l[o].name?"#4b5563, #1f2937":"#6366f1, #4338ca"})`},children:s.jsxs("div",{className:"text-center p-6 bg-black/30 backdrop-blur-sm rounded-lg max-w-md",children:[s.jsx("h3",{className:"text-2xl font-bold text-white mb-2",children:l[o].name}),s.jsx("p",{className:"text-gray-100",children:l[o].description})]})}),s.jsx("button",{onClick:u,className:"absolute left-4 top-1/2 -translate-y-1/2 p-2 rounded-full bg-black/50 hover:bg-black/70 transition-colors",children:s.jsx(T,{className:"w-6 h-6 text-white"})}),s.jsx("button",{onClick:g,className:"absolute right-4 top-1/2 -translate-y-1/2 p-2 rounded-full bg-black/50 hover:bg-black/70 transition-colors",children:s.jsx(z,{className:"w-6 h-6 text-white"})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[s.jsxs("div",{className:"bg-white/5 rounded-lg p-4",children:[s.jsx("h4",{className:"text-lg font-medium text-white mb-3",children:"Dimensions"}),s.jsxs("ul",{className:"space-y-2 text-gray-300",children:[s.jsxs("li",{className:"flex justify-between",children:[s.jsx("span",{children:"Length:"}),s.jsxs("span",{children:[l[o].dimensions.length,"m"]})]}),s.jsxs("li",{className:"flex justify-between",children:[s.jsx("span",{children:"Width:"}),s.jsxs("span",{children:[l[o].dimensions.width,"m"]})]}),s.jsxs("li",{className:"flex justify-between",children:[s.jsx("span",{children:"Height:"}),s.jsxs("span",{children:[l[o].dimensions.height,"m"]})]})]})]}),s.jsxs("div",{className:"bg-white/5 rounded-lg p-4",children:[s.jsx("h4",{className:"text-lg font-medium text-white mb-3",children:"Materials"}),s.jsxs("ul",{className:"space-y-2 text-gray-300",children:[s.jsxs("li",{className:"flex justify-between",children:[s.jsx("span",{children:"Type:"}),s.jsx("span",{className:"capitalize",children:l[o].material})]}),s.jsxs("li",{className:"flex justify-between",children:[s.jsx("span",{children:"Color:"}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-4 h-4 rounded-full mr-2",style:{backgroundColor:l[o].materialColor}}),s.jsx("span",{children:l[o].materialColor})]})]}),s.jsxs("li",{className:"flex justify-between",children:[s.jsx("span",{children:"Glass:"}),s.jsx("span",{children:l[o].glass.visible?"Yes":"No"})]})]})]})]}),s.jsxs("div",{className:"flex justify-end space-x-3",children:[s.jsx("button",{onClick:i,className:"px-4 py-2 rounded-lg border border-white/20 text-white hover:bg-white/10 transition-colors",children:"Cancel"}),s.jsx("button",{onClick:()=>{a(l[o]),i()},className:"px-4 py-2 rounded-lg bg-blue-600 text-white hover:bg-blue-500 transition-colors",children:"Apply This Design"})]})]})]})}):null};function we({title:t,titleId:s,...i},a){return e.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":s},i),t?e.createElement("title",{id:s},t):null,e.createElement("path",{d:"m11.645 20.91-.007-.003-.022-.012a15.247 15.247 0 0 1-.383-.218 25.18 25.18 0 0 1-4.244-3.17C4.688 15.36 2.25 12.174 2.25 8.25 2.25 5.322 4.714 3 7.688 3A5.5 5.5 0 0 1 12 5.052 5.5 5.5 0 0 1 16.313 3c2.973 0 5.437 2.322 5.437 5.25 0 3.925-2.438 7.111-4.739 9.256a25.175 25.175 0 0 1-4.244 3.17 15.247 15.247 0 0 1-.383.219l-.022.012-.007.004-.003.001a.752.752 0 0 1-.704 0l-.003-.001Z"}))}const fe=e.forwardRef(we),ve=({isOpen:t,onClose:i,onApplyDesign:a,currentDesign:n})=>{const[r,l]=e.useState([]),[o,c]=e.useState(""),[d,m]=e.useState(""),[h,u]=e.useState(!1),[p,b]=e.useState(-1);e.useEffect((()=>{t&&(()=>{try{const e=localStorage.getItem("pergolaWishlist");e&&l(JSON.parse(e))}catch(e){}})()}),[t]),e.useEffect((()=>{if(r.length>0)try{localStorage.setItem("pergolaWishlist",JSON.stringify(r))}catch(e){}}),[r]);return t?s.jsx(x.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80",onClick:i,children:s.jsxs(x.div,{initial:{scale:.9,y:20},animate:{scale:1,y:0},exit:{scale:.9,y:20},className:"bg-gradient-to-b from-gray-900 to-black rounded-xl overflow-hidden shadow-2xl max-w-4xl w-full mx-4",onClick:e=>e.stopPropagation(),children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-white/10",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(fe,{className:"w-5 h-5 text-red-500 mr-2"}),s.jsx("h2",{className:"text-xl font-medium text-white",children:"My Wishlist"})]}),s.jsx("button",{onClick:i,className:"p-2 rounded-lg hover:bg-white/10 transition-colors",children:s.jsx(ge,{className:"w-5 h-5 text-white"})})]}),s.jsxs("div",{className:"p-6",children:[!h&&s.jsxs("button",{onClick:()=>{c(""),m(""),b(-1),u(!0)},className:"w-full mb-6 p-3 flex items-center justify-center bg-white/5 hover:bg-white/10 border border-white/10 rounded-lg transition-all",children:[s.jsx(Y,{className:"w-5 h-5 text-red-500 mr-2"}),s.jsx("span",{className:"text-white",children:"Save Current Design"})]}),s.jsx(g,{children:h&&s.jsx(x.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"mb-6 overflow-hidden",children:s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-lg p-4",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h3",{className:"text-lg font-medium text-white",children:p>=0?"Edit Saved Design":"Save Current Design"}),s.jsx("button",{onClick:()=>u(!1),className:"p-1 rounded-full hover:bg-white/10 transition-colors",children:s.jsx(ge,{className:"w-4 h-4 text-white"})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"designName",className:"block text-sm font-medium text-gray-300 mb-1",children:"Design Name"}),s.jsx("input",{type:"text",id:"designName",value:o,onChange:e=>c(e.target.value),className:"w-full px-3 py-2 bg-black/30 border border-white/10 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"My Perfect Pergola"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"designNote",className:"block text-sm font-medium text-gray-300 mb-1",children:"Notes (Optional)"}),s.jsx("textarea",{id:"designNote",value:d,onChange:e=>m(e.target.value),rows:3,className:"w-full px-3 py-2 bg-black/30 border border-white/10 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Add any notes about this design..."})]}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-2",children:[s.jsx("button",{onClick:()=>u(!1),className:"px-4 py-2 rounded-lg border border-white/20 text-white hover:bg-white/10 transition-colors",children:"Cancel"}),s.jsx("button",{onClick:()=>{if(!o.trim())return void alert("Please enter a name for your design");const e={...n,name:o.trim(),note:d.trim(),date:(new Date).toISOString()};if(p>=0){const t=[...r];t[p]=e,l(t)}else l([...r,e]);c(""),m(""),u(!1),b(-1)},className:"px-4 py-2 rounded-lg bg-red-600 text-white hover:bg-red-500 transition-colors",children:p>=0?"Update Design":"Save Design"})]})]})]})})}),r.length>0?s.jsx("div",{className:"space-y-4 max-h-96 overflow-y-auto pr-2 custom-scrollbar",children:r.map(((e,t)=>s.jsx("div",{className:"bg-white/5 hover:bg-white/10 border border-white/10 rounded-lg p-4 transition-all",children:s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-white",children:e.name}),s.jsx("p",{className:"text-xs text-gray-400",children:new Date(e.date).toLocaleDateString()}),e.note&&s.jsx("p",{className:"text-sm text-gray-300 mt-2",children:e.note})]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{onClick:()=>(e=>{const t=r[e];c(t.name),m(t.note||""),b(e),u(!0)})(t),className:"p-1.5 rounded-full bg-white/10 hover:bg-white/20 transition-colors",title:"Edit",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-white",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{d:"M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"})})}),s.jsx("button",{onClick:()=>(e=>{if(window.confirm("Are you sure you want to delete this saved design?")){const t=r.filter(((t,s)=>s!==e));l(t),0===t.length?localStorage.removeItem("pergolaWishlist"):localStorage.setItem("pergolaWishlist",JSON.stringify(t))}})(t),className:"p-1.5 rounded-full bg-white/10 hover:bg-red-600/70 transition-colors",title:"Delete",children:s.jsx(ue,{className:"h-4 w-4 text-white"})}),s.jsx("button",{onClick:()=>(e=>{a(e),i()})(e),className:"p-1.5 rounded-full bg-blue-600 hover:bg-blue-500 transition-colors",title:"Apply Design",children:s.jsx(N,{className:"h-4 w-4 text-white"})})]})]})},t)))}):s.jsxs("div",{className:"text-center py-8",children:[s.jsx(Y,{className:"w-12 h-12 text-white/20 mx-auto mb-3"}),s.jsx("p",{className:"text-white/50",children:"No saved designs yet"}),s.jsx("p",{className:"text-sm text-white/30 mt-2",children:"Save your favorite designs to access them later"})]})]})]})}):null},je=({isOpen:t,onClose:i,onCommandRecognized:a,onDimensionChange:n,onMaterialChange:r,onEnvironmentChange:l,onGlassChange:o,currentDesign:c})=>{const[d,m]=e.useState(!1),[h,u]=e.useState(""),[g,p]=e.useState(""),[b,w]=e.useState([]),[f,v]=e.useState([]),j=e.useRef(null);e.useEffect((()=>{if("webkitSpeechRecognition"in window||"SpeechRecognition"in window){const e=window.SpeechRecognition||window.webkitSpeechRecognition;j.current=new e,j.current.continuous=!0,j.current.interimResults=!0,j.current.lang="en-US",j.current.onresult=e=>{const t=e.resultIndex,s=e.results[t][0].transcript;u(s),e.results[t].isFinal&&y(s)},j.current.onerror=e=>{p(`Error: ${e.error}. Please try again.`),m(!1)},v([{command:"set height to [number] meters",description:"Change pergola height"},{command:"set width to [number] meters",description:"Change pergola width"},{command:"set length to [number] meters",description:"Change pergola length"},{command:"change material to [wood/aluminum/iron/wpc]",description:"Change pergola material"},{command:"set color to [color name]",description:"Change material color"},{command:"add glass",description:"Add glass to the pergola"},{command:"remove glass",description:"Remove glass from the pergola"},{command:"change environment to [sunset/dawn/night/etc]",description:"Change the environment"},{command:"reset design",description:"Reset to default design"},{command:"help",description:"List available commands"}])}else p("Speech recognition is not supported in your browser.");return()=>{j.current&&j.current.stop()}}),[]);const y=e=>{const t=e.toLowerCase().trim();w((e=>[...e.slice(-4),{text:t,timestamp:new Date}]));const s=t.match(/set height to (\d+\.?\d*)\s*(meter|meters|m)?/),i=t.match(/set width to (\d+\.?\d*)\s*(meter|meters|m)?/),d=t.match(/set length to (\d+\.?\d*)\s*(meter|meters|m)?/);if(s){const e=parseFloat(s[1]);return!isNaN(e)&&e>0&&e<=5?(n({...c.dimensions,height:e}),void p(`Height set to ${e} meters.`)):void p("Please specify a valid height between 0 and 5 meters.")}if(i){const e=parseFloat(i[1]);return!isNaN(e)&&e>0&&e<=8?(n({...c.dimensions,width:e}),void p(`Width set to ${e} meters.`)):void p("Please specify a valid width between 0 and 8 meters.")}if(d){const e=parseFloat(d[1]);return!isNaN(e)&&e>0&&e<=10?(n({...c.dimensions,length:e}),void p(`Length set to ${e} meters.`)):void p("Please specify a valid length between 0 and 10 meters.")}if(t.includes("change material to")||t.includes("set material to"))return t.includes("wood")?(r("wood"),void p("Material changed to wood.")):t.includes("aluminum")||t.includes("aluminium")?(r("aluminium"),void p("Material changed to aluminum.")):t.includes("iron")?(r("iron"),void p("Material changed to iron.")):t.includes("wpc")?(r("wpc"),void p("Material changed to WPC (Wood Plastic Composite).")):void p("Please specify a valid material: wood, aluminum, iron, or wpc.");if(t.includes("set color to")||t.includes("change color to")){const e={black:"#000000",white:"#FFFFFF",gray:"#808080",silver:"#C0C0C0",red:"#FF0000",blue:"#0000FF",green:"#008000",brown:"#8B4513","dark brown":"#5D4037","light brown":"#A1887F","dark gray":"#404040","light gray":"#D3D3D3"};for(const[s,i]of Object.entries(e))if(t.includes(s))return r(c.material,i),void p(`Color changed to ${s}.`);p("Please specify a valid color like black, white, gray, silver, red, blue, green, or brown.")}else{if(t.includes("add glass")||t.includes("enable glass"))return o({...c.glass,visible:!0,applied:!0}),void p("Glass added to the pergola.");if(t.includes("remove glass")||t.includes("disable glass"))return o({...c.glass,visible:!1,applied:!1}),void p("Glass removed from the pergola.");if(t.includes("change environment to")||t.includes("set environment to")){const e=["sunset","dawn","night","warehouse","forest","apartment","studio","city","park","lobby"];for(const s of e)if(t.includes(s))return l(s),void p(`Environment changed to ${s}.`);p("Please specify a valid environment like sunset, dawn, night, forest, city, etc.")}else{if(!t.includes("help")&&!t.includes("what can you do"))return t.includes("reset design")||t.includes("start over")?(a("reset"),void p("Design has been reset to default.")):void p("Sorry, I didn't understand that command. Try saying 'help' for a list of commands.");p("Here are some commands you can try:")}}};return t?s.jsxs(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},className:"fixed bottom-6 right-6 z-40 w-96 bg-black/80 backdrop-blur-xl rounded-2xl overflow-hidden border border-white/10 shadow-2xl",children:[s.jsxs("div",{className:"p-5",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsxs("h3",{className:"text-lg font-medium text-white flex items-center",children:[s.jsx(te,{className:"w-5 h-5 mr-2 "+(d?"text-red-500":"text-white")}),"Voice Commands"]}),s.jsx("button",{onClick:i,className:"p-1.5 rounded-full bg-white/10 hover:bg-white/20 transition-colors","aria-label":"Close voice command panel",children:s.jsx(ge,{className:"w-5 h-5"})})]}),s.jsx("div",{className:"bg-black/40 rounded-lg p-3 mb-4 min-h-[60px] border border-white/10",children:s.jsx("p",{className:"text-white/80 text-sm",children:h||(d?"Listening...":"Press the microphone button and speak a command")})}),s.jsx("div",{className:"mb-4",children:s.jsx("p",{className:"text-white/90 font-medium",children:g})}),b.length>0&&s.jsxs("div",{className:"mb-4",children:[s.jsx("h4",{className:"text-sm font-medium text-white/70 mb-2",children:"Recent Commands:"}),s.jsx("div",{className:"bg-black/40 rounded-lg border border-white/10 overflow-hidden",children:b.map(((e,t)=>{return s.jsxs("div",{className:"px-3 py-2 text-sm border-b border-white/5 last:border-b-0 flex justify-between",children:[s.jsx("span",{className:"text-white/80",children:e.text}),s.jsx("span",{className:"text-white/50 text-xs",children:(i=e.timestamp,i.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}))})]},t);var i}))})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("h4",{className:"text-sm font-medium text-white/70 mb-2",children:"Try saying:"}),s.jsx("div",{className:"grid grid-cols-1 gap-1 max-h-40 overflow-y-auto pr-1 custom-scrollbar",children:f.map(((e,t)=>s.jsxs("div",{className:"px-3 py-1.5 text-sm bg-white/5 rounded-md",children:[s.jsx("span",{className:"text-blue-400",children:e.command}),s.jsx("span",{className:"text-white/50 text-xs block",children:e.description})]},t)))})]})]}),s.jsxs("div",{className:"bg-white/5 p-4 flex justify-between items-center",children:[s.jsx("div",{className:"text-xs text-white/50",children:d?"Listening for commands...":"Voice recognition ready"}),s.jsx("button",{onClick:()=>{if(j.current){if(d)j.current.stop(),p("Voice recognition stopped.");else try{j.current.start(),p("Listening for commands...")}catch(e){p(`Error starting speech recognition: ${e.message}`)}m(!d)}else p("Speech recognition is not supported in your browser.")},className:"p-3 rounded-full transition-all "+(d?"bg-red-500 hover:bg-red-600":"bg-gradient-to-r from-blue-600 to-indigo-700 hover:from-blue-500 hover:to-indigo-600"),"aria-label":d?"Stop listening":"Start listening",children:d?s.jsx(le,{className:"w-6 h-6 text-white"}):s.jsx(te,{className:"w-6 h-6 text-white"})})]})]}):null},ye=({isOpen:t,onClose:i,currentDesign:a,modelRef:n,captureScreenshot:r})=>{const[l,o]=e.useState(!1),[c,d]=e.useState(0),[m,h]=e.useState(null),[u,g]=e.useState("My Pergola Design"),[w,v]=e.useState(!0),[j,y]=e.useState(!0),[N,k]=e.useState(!0),C=e.useRef(null),S=async()=>{if(r)try{const e=await r();return h(e),e}catch(e){return null}else if(n&&n.current)try{const e=(await b(n.current)).toDataURL("image/png");return h(e),e}catch(e){return null}return null},M=e=>{if(!e)return"Not specified";return{"#000000":"Black","#FFFFFF":"White","#808080":"Gray","#C0C0C0":"Silver","#FF0000":"Red","#0000FF":"Blue","#008000":"Green","#8B4513":"Brown","#5D4037":"Dark Brown","#A1887F":"Light Brown","#404040":"Dark Gray","#D3D3D3":"Light Gray"}[e.toUpperCase()]||e};return t?s.jsx(x.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70",children:s.jsxs("div",{className:"relative w-full max-w-4xl mx-auto p-4",children:[s.jsx("button",{onClick:i,className:"absolute top-4 right-4 z-10 p-2 rounded-full bg-black/50 text-white hover:bg-black/70 transition-colors","aria-label":"Close PDF export",children:s.jsx(ge,{className:"w-6 h-6"})}),s.jsxs("div",{className:"bg-black/80 backdrop-blur-xl rounded-2xl overflow-hidden border border-white/10",children:[s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex items-center mb-6",children:[s.jsx(_,{className:"w-8 h-8 text-white mr-3"}),s.jsx("h2",{className:"text-2xl font-semibold text-white",children:"Export Design as PDF"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsx("div",{children:s.jsxs("form",{ref:C,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"pdfName",className:"block text-sm font-medium text-white/70 mb-1",children:"PDF Name"}),s.jsx("input",{type:"text",id:"pdfName",value:u,onChange:e=>g(e.target.value),className:"w-full px-3 py-2 bg-black/40 border border-white/10 rounded-lg text-white focus:outline-none focus:ring-1 focus:ring-white/30",placeholder:"My Pergola Design"})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("label",{className:"block text-sm font-medium text-white/70 mb-1",children:"PDF Content"}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",id:"includeRenderImage",checked:N,onChange:e=>k(e.target.checked),className:"w-4 h-4 rounded border-white/30 text-blue-600 focus:ring-blue-500"}),s.jsx("label",{htmlFor:"includeRenderImage",className:"ml-2 text-sm text-white",children:"Include 3D Render Image"})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",id:"includeDetails",checked:w,onChange:e=>v(e.target.checked),className:"w-4 h-4 rounded border-white/30 text-blue-600 focus:ring-blue-500"}),s.jsx("label",{htmlFor:"includeDetails",className:"ml-2 text-sm text-white",children:"Include Design Specifications"})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",id:"includeMaterials",checked:j,onChange:e=>y(e.target.checked),className:"w-4 h-4 rounded border-white/30 text-blue-600 focus:ring-blue-500"}),s.jsx("label",{htmlFor:"includeMaterials",className:"ml-2 text-sm text-white",children:"Include Materials Information"})]})]}),N&&s.jsx("div",{children:s.jsxs("button",{type:"button",onClick:async()=>{await S()},className:"w-full px-4 py-2 bg-white/10 hover:bg-white/20 rounded-lg transition-colors text-white flex items-center justify-center",children:[s.jsx(L,{className:"w-5 h-5 mr-2"}),"Take Screenshot for PDF"]})})]})}),s.jsx("div",{children:s.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-lg p-4 h-full",children:[s.jsx("h3",{className:"text-lg font-medium text-white mb-3",children:"PDF Preview"}),m?s.jsx("div",{className:"aspect-video bg-gray-900 rounded-lg overflow-hidden mb-4",children:s.jsx("img",{src:m,alt:"Design Preview",className:"w-full h-full object-contain"})}):s.jsx("div",{className:"aspect-video bg-gray-900 rounded-lg flex items-center justify-center mb-4",children:s.jsx("p",{className:"text-white/50",children:"Screenshot preview will appear here"})}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium text-white/70",children:"Document Title"}),s.jsx("p",{className:"text-white",children:u})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium text-white/70",children:"Content Sections"}),s.jsxs("ul",{className:"text-sm text-white/80 space-y-1",children:[N&&s.jsx("li",{children:" 3D Render Image"}),w&&s.jsx("li",{children:" Design Specifications"}),j&&s.jsx("li",{children:" Materials Information"})]})]})]})]})})]})]}),s.jsxs("div",{className:"bg-white/5 p-4 flex justify-between items-center",children:[s.jsx("button",{onClick:i,className:"px-4 py-2 bg-white/10 hover:bg-white/20 rounded-lg transition-colors text-white",children:"Cancel"}),s.jsx("button",{onClick:async()=>{if(a){o(!0),d(10);try{const t=new p({orientation:"portrait",unit:"mm",format:"a4"});if(t.setFontSize(24),t.setTextColor(0,0,0),t.text(u,20,20),t.setFontSize(10),t.setTextColor(100,100,100),t.text(`Generated on ${(new Date).toLocaleDateString()}`,20,30),d(30),N){const e=m||await S();e&&t.addImage(e,"PNG",20,40,170,100)}d(60);let s=N?150:40;if(w&&(t.setFontSize(16),t.setTextColor(0,0,0),t.text("Design Specifications",20,s),t.setFontSize(12),t.setTextColor(50,50,50),s+=10,t.text("Dimensions:",20,s),s+=6,t.text(` Length: ${a.dimensions.length} meters`,25,s),s+=6,t.text(` Width: ${a.dimensions.width} meters`,25,s),s+=6,t.text(` Height: ${a.dimensions.height} meters`,25,s),a.pillars&&(s+=10,t.text("Pillars:",20,s),s+=6,t.text(` Count: ${a.pillars.count}`,25,s),s+=6,t.text(` Size: ${a.pillars.size.width}m  ${a.pillars.size.depth}m`,25,s)),a.rafters&&(s+=10,t.text("Rafters:",20,s),s+=6,t.text(` Pattern: ${a.rafters.pattern||"Standard"}`,25,s),a.rafters.leftToRight&&(s+=6,t.text(` Left to Right: ${a.rafters.leftToRight.count} rafters`,25,s)),a.rafters.frontToBack&&(s+=6,t.text(` Front to Back: ${a.rafters.frontToBack.count} rafters`,25,s)))),d(80),j&&(s+=15,t.setFontSize(16),t.setTextColor(0,0,0),t.text("Materials",20,s),t.setFontSize(12),t.setTextColor(50,50,50),s+=10,t.text(` Primary Material: ${e=a.material,e?e.charAt(0).toUpperCase()+e.slice(1):"Not specified"}`,25,s),s+=6,t.text(` Color: ${M(a.materialColor)}`,25,s),a.glass&&a.glass.applied&&(s+=6,t.text(" Glass: "+(a.glass.applied?"Yes":"No"),25,s),a.glass.applied&&(s+=6,t.text(` Glass Color: ${M(a.glass.color)}`,25,s),s+=6,t.text(` Glass Opacity: ${100*a.glass.opacity}%`,25,s),a.glass.sides)))){s+=6;const e=[];a.glass.sides.top&&e.push("Top"),a.glass.sides.front&&e.push("Front"),a.glass.sides.back&&e.push("Back"),a.glass.sides.left&&e.push("Left"),a.glass.sides.right&&e.push("Right"),t.text(` Glass Sides: ${e.join(", ")||"None"}`,25,s)}d(90);const i=t.internal.getNumberOfPages();t.setFontSize(8),t.setTextColor(150,150,150);for(let e=1;e<=i;e++)t.setPage(e),t.text("Generated by 3D Pergola Visualizer | luxurypergola.com",t.internal.pageSize.getWidth()/2,287,{align:"center"});t.save(`${u.replace(/\s+/g,"-").toLowerCase()}.pdf`),d(100),setTimeout((()=>{o(!1),d(0)}),1e3)}catch(t){o(!1),d(0),alert("There was an error generating your PDF. Please try again.")}var e}},disabled:l,className:"px-4 py-2 rounded-lg transition-colors text-white flex items-center "+(l?"bg-gray-600 cursor-not-allowed":"bg-gradient-to-r from-blue-600 to-indigo-700 hover:from-blue-500 hover:to-indigo-600"),children:l?s.jsxs(s.Fragment,{children:[s.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Generating PDF (",c,"%)"]}):s.jsxs(s.Fragment,{children:[s.jsx(f,{className:"w-5 h-5 mr-2"}),"Download PDF"]})})]})]})]})}):null};function Ne({onExportClick:t,onToggleQuickPreview:i,onToggleWishlist:a,onToggleVoiceControl:n,onTogglePDFExport:r,darkMode:l,onToggleDarkMode:o}){const[c,d]=e.useState(!1),[m,h]=e.useState({pergola:92,gazebo:87,canopy:85}),u=()=>{d(!c)};return s.jsxs("nav",{className:`h-16 ${l?"bg-black/40":"bg-white/40"} backdrop-blur-xl border-b ${l?"border-white/10":"border-black/10"} shadow-md`,children:[s.jsxs("div",{className:"h-full max-w-7xl mx-auto px-4 sm:px-6 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("h1",{className:"text-xl sm:text-2xl font-light tracking-wider "+(l?"text-white":"text-gray-800"),children:[s.jsx("span",{className:"font-medium",children:"3D"}),s.jsx("span",{className:"font-light",children:"PERGOLA"}),s.jsx("span",{className:"text-xs align-top ml-1 text-blue-500",children:""})]}),s.jsxs("div",{className:"hidden md:flex items-center space-x-2",children:[s.jsx("span",{className:"text-xs px-2 py-1 rounded-full "+(l?"bg-blue-900/40 text-blue-300":"bg-blue-100 text-blue-700"),children:"Pergola"}),s.jsx("span",{className:"text-xs px-2 py-1 rounded-full "+(l?"bg-green-900/40 text-green-300":"bg-green-100 text-green-700"),children:"Gazebo"}),s.jsx("span",{className:"text-xs px-2 py-1 rounded-full "+(l?"bg-purple-900/40 text-purple-300":"bg-purple-100 text-purple-700"),children:"Canopy"})]})]}),s.jsxs("div",{className:"flex items-center space-x-1 sm:space-x-2 md:space-x-4",children:[s.jsxs("button",{onClick:()=>{"function"==typeof o&&o()},className:"navbar-button has-tooltip "+(l?"text-white hover:bg-white/10":"text-gray-800 hover:bg-black/10"),"aria-label":l?"Switch to Light Mode":"Switch to Dark Mode",children:[l?s.jsx(ce,{className:"w-5 h-5"}):s.jsx(ie,{className:"w-5 h-5"}),s.jsx("span",{className:"tooltip",children:l?"Light Mode":"Dark Mode"})]}),s.jsxs("button",{onClick:u,className:"navbar-button has-tooltip "+(l?"text-white hover:bg-white/10":"text-gray-800 hover:bg-black/10"),"aria-label":"SEO Score",children:[s.jsx(P,{className:"w-5 h-5"}),s.jsx("span",{className:"tooltip",children:"SEO Score"})]}),s.jsxs("button",{onClick:()=>{"function"==typeof i&&i()},className:"navbar-button has-tooltip "+(l?"text-white hover:bg-white/10":"text-gray-800 hover:bg-black/10"),"aria-label":"Quick Preview Pergola Designs",children:[s.jsx(ne,{className:"w-5 h-5 mr-1 md:mr-2"}),s.jsx("span",{className:"font-medium tracking-wide hidden sm:inline",children:"Preview"}),s.jsx("span",{className:"tooltip",children:"Quick Preview Pergola & Gazebo Designs"})]}),s.jsxs("button",{onClick:()=>{"function"==typeof a&&a()},className:"navbar-button has-tooltip "+(l?"text-white hover:bg-white/10":"text-gray-800 hover:bg-black/10"),"aria-label":"Wishlist Pergola Designs",children:[s.jsx(Y,{className:"w-5 h-5 mr-1 md:mr-2"}),s.jsx("span",{className:"font-medium tracking-wide hidden sm:inline",children:"Wishlist"}),s.jsx("span",{className:"tooltip",children:"Save Favorite Pergola & Canopy Designs"})]}),s.jsxs("button",{onClick:()=>{"function"==typeof n&&n()},className:"navbar-button has-tooltip "+(l?"text-white hover:bg-white/10":"text-gray-800 hover:bg-black/10"),"aria-label":"Voice Control Pergola Designer",children:[s.jsx(te,{className:"w-5 h-5 mr-1 md:mr-2"}),s.jsx("span",{className:"font-medium tracking-wide hidden sm:inline",children:"Voice"}),s.jsx("span",{className:"tooltip",children:"Voice Control Pergola Designer"})]}),s.jsxs("button",{onClick:()=>{"function"==typeof r&&r()},className:"navbar-button has-tooltip "+(l?"text-white hover:bg-white/10":"text-gray-800 hover:bg-black/10"),"aria-label":"PDF Export Pergola Design",children:[s.jsx(_,{className:"w-5 h-5 mr-1 md:mr-2"}),s.jsx("span",{className:"font-medium tracking-wide hidden sm:inline",children:"PDF"}),s.jsx("span",{className:"tooltip",children:"Export Pergola Design as PDF"})]}),s.jsxs("button",{onClick:()=>{"function"==typeof t&&t()},className:"export-button flex items-center px-3 sm:px-4 py-2 sm:py-2.5 rounded-lg bg-gradient-to-r from-blue-600 to-indigo-700 text-white hover:from-blue-500 hover:to-indigo-600 active:from-blue-700 active:to-indigo-800 transition-all duration-300 shadow-md","aria-label":"Export Pergola Design",children:[s.jsx(I,{className:"w-5 h-5 mr-1 md:mr-2"}),s.jsx("span",{className:"font-medium tracking-wide",children:"Export"})]})]})]}),c&&s.jsxs("div",{className:`absolute top-16 right-0 w-64 md:w-80 ${l?"bg-gray-900":"bg-white"} shadow-lg rounded-bl-lg z-50 p-4 border ${l?"border-gray-700":"border-gray-200"}`,children:[s.jsxs("div",{className:"flex justify-between items-center mb-3",children:[s.jsx("h3",{className:"font-medium "+(l?"text-white":"text-gray-800"),children:"SEO Performance"}),s.jsx("button",{onClick:u,className:"p-1 rounded-full "+(l?"hover:bg-gray-700":"hover:bg-gray-100"),children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 "+(l?"text-white":"text-gray-500"),viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between mb-1",children:[s.jsx("span",{className:"text-sm "+(l?"text-blue-300":"text-blue-700"),children:"Pergola"}),s.jsxs("span",{className:"text-sm font-medium "+(l?"text-white":"text-gray-700"),children:[m.pergola,"%"]})]}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:s.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${m.pergola}%`}})})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between mb-1",children:[s.jsx("span",{className:"text-sm "+(l?"text-green-300":"text-green-700"),children:"Gazebo"}),s.jsxs("span",{className:"text-sm font-medium "+(l?"text-white":"text-gray-700"),children:[m.gazebo,"%"]})]}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:s.jsx("div",{className:"bg-green-600 h-2 rounded-full",style:{width:`${m.gazebo}%`}})})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between mb-1",children:[s.jsx("span",{className:"text-sm "+(l?"text-purple-300":"text-purple-700"),children:"Canopy"}),s.jsxs("span",{className:"text-sm font-medium "+(l?"text-white":"text-gray-700"),children:[m.canopy,"%"]})]}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:s.jsx("div",{className:"bg-purple-600 h-2 rounded-full",style:{width:`${m.canopy}%`}})})]})]}),s.jsx("div",{className:"mt-3 text-xs "+(l?"text-gray-400":"text-gray-500"),children:"Keywords optimized for luxury outdoor structures including pergolas, gazebos, and canopies."})]})]})}function ke({dimensions:e,onDimensionsChange:t}){const i=e=>{switch(e){case"small":t({length:2.5,width:2,height:2.2});break;case"medium":t({length:4,width:3,height:2.5});break;case"large":t({length:6,width:4,height:2.8})}};return s.jsxs("div",{className:"space-y-5",children:[s.jsxs("div",{className:"panel-title",children:[s.jsx(C,{className:"w-5 h-5"}),s.jsx("h2",{children:"Dimensions"})]}),s.jsx("div",{className:"space-y-4",children:["length","width","height"].map((i=>s.jsxs("div",{className:"space-y-1.5",children:[s.jsxs("label",{className:"premium-label capitalize",children:[i," (meters)"]}),s.jsx("input",{type:"number",value:e[i],onChange:s=>((s,i)=>{const a=parseFloat(i);isNaN(a)||t({...e,[s]:a})})(i,s.target.value),min:"0.1",max:"50",step:"0.1",className:"input-field"})]},i)))}),s.jsxs("div",{className:"mt-5",children:[s.jsx("label",{className:"premium-label mb-2",children:"Quick Presets"}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{onClick:()=>i("small"),className:"button-secondary text-sm py-1.5 px-3",children:"Small"}),s.jsx("button",{onClick:()=>i("medium"),className:"button-secondary text-sm py-1.5 px-3",children:"Medium"}),s.jsx("button",{onClick:()=>i("large"),className:"button-secondary text-sm py-1.5 px-3",children:"Large"})]})]}),s.jsx("div",{className:"premium-card mt-5 bg-black/20",children:s.jsxs("p",{className:"text-sm text-white/70",children:[s.jsx("span",{className:"font-medium text-white/90",children:"AI Suggestion:"})," Based on your current dimensions, this pergola would be suitable for ",e.length*e.width<9?"small gatherings":e.length*e.width<20?"medium-sized outdoor dining":"large entertainment areas","."]})})]})}const Ce={black:"#000000",grey:"#808080",brown:"#8B4513","light-oak":"#D2B48C","dark-oak":"#5C4033",mahogany:"#A52A2A",teak:"#CD853F","natural-wood-1":"#DEB887","natural-wood-2":"#A0522D","natural-wood-3":"#8B4513","tram-wood":"#B8860B","wood-variant-1":"#D2691E","wood-variant-2":"#8B4513"},Se={iron:{name:"Iron",colors:["black","grey","brown"],sizes:{pillar:["100x100mm","150x150mm","200x200mm"],beam:["100x50mm pipe","100x50mm ISLB","150x65mm pipe","150x65mm ISLB"],rafter:["100x100mm pipe","100x50mm pipe","25x75mm pipe","150x75mm pipe"]}},aluminium:{name:"Aluminium Profile",colors:["black","grey","brown","tram-wood","wood-variant-1","wood-variant-2"],sizes:{pillar:["100x100mm","125x125mm","150x150mm"],beam:["100x50mm","125x60mm","150x75mm"],rafter:["100x50mm","80x40mm","125x60mm","150x75mm"]}},wpc:{name:"WPC",colors:["natural-wood-1","natural-wood-2","natural-wood-3"],sizes:{pillar:["100x100mm","125x125mm","150x150mm"],beam:["100x50mm","125x60mm","150x75mm"],rafter:["100x50mm","80x40mm","125x60mm","150x75mm"]}},wood:{name:"Wood",colors:["light-oak","dark-oak","mahogany","teak"],sizes:{pillar:["100x100mm","125x125mm","150x150mm"],beam:["100x100mm","150x150mm","100x200mm"],rafter:["125x60mm","100x100mm","150x100mm","150x150mm","150x25mm","100x40mm"]}}};function Le({selectedMaterial:e,materialColor:t,onMaterialChange:i,onColorChange:a}){var n;const r=e=>Ce[e]||e;return s.jsxs("div",{className:"space-y-5",children:[s.jsxs("div",{className:"panel-title",children:[s.jsx(me,{className:"w-5 h-5"}),s.jsx("h2",{children:"Material Selection"})]}),s.jsx("div",{className:"grid grid-cols-2 gap-3",children:Object.entries(Se).map((([t,a])=>s.jsxs("button",{onClick:()=>i(t),className:"p-4 rounded-xl border transition-all "+(e===t?"border-white/30 bg-white/10":"border-white/5 bg-black/30 hover:bg-black/40 hover:border-white/10"),children:[s.jsx("p",{className:"font-medium",children:a.name}),s.jsx("div",{className:"mt-2 flex flex-wrap gap-1.5",children:a.colors.slice(0,3).map((e=>s.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:r(e),opacity:1}},e)))})]},t)))}),s.jsxs("div",{className:"mt-5",children:[s.jsx("h3",{className:"premium-label",children:"Material Colors"}),s.jsx("div",{className:"flex flex-wrap gap-3 mt-2",children:null==(n=Se[e])?void 0:n.colors.map((e=>{const i=r(e),n=i.toLowerCase()===t.toLowerCase();return s.jsx("button",{onClick:()=>(e=>{const t=r(e);a(t)})(e),className:"premium-color-swatch "+(n?"active":""),title:e.replace(/-/g," "),style:{backgroundColor:i}},e)}))})]}),s.jsxs("div",{className:"mt-6",children:[s.jsx("h3",{className:"premium-label",children:"Custom Color"}),s.jsxs("div",{className:"grid grid-cols-2 gap-3 mt-2",children:[s.jsx("div",{children:s.jsx("input",{type:"color",value:t,onChange:e=>a(e.target.value),className:"w-full h-10 rounded-lg bg-black/40 border border-white/10 cursor-pointer"})}),s.jsx("div",{children:s.jsx("input",{type:"text",value:t,onChange:e=>a(e.target.value),className:"input-field h-10",placeholder:"#RRGGBB"})})]})]}),s.jsx("div",{className:"premium-card mt-5 bg-black/20",children:s.jsxs("p",{className:"text-sm text-white/70",children:[s.jsx("span",{className:"font-medium text-white/90",children:"AI Suggestion:"})," ",Se[e].name," is an excellent choice for durability and aesthetics. Popular in modern pergola designs."]})})]})}function Me({pillars:e,onPillarsChange:t}){return s.jsxs("div",{className:"space-y-5",children:[s.jsxs("div",{className:"panel-title",children:[s.jsx(O,{className:"w-5 h-5"}),s.jsx("h2",{children:"Pillar Customization"})]}),s.jsxs("div",{className:"space-y-5",children:[s.jsxs("div",{children:[s.jsx("label",{className:"premium-label",children:"Pillar Size (meters)"}),s.jsxs("div",{className:"grid grid-cols-2 gap-3 mt-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-white/60 mb-1",children:"Width"}),s.jsx("input",{type:"number",value:e.size.width,onChange:s=>t({...e,size:{...e.size,width:parseFloat(s.target.value)}}),min:"0.01",max:"1.0",step:"0.01",className:"input-field"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-white/60 mb-1",children:"Depth"}),s.jsx("input",{type:"number",value:e.size.depth,onChange:s=>t({...e,size:{...e.size,depth:parseFloat(s.target.value)}}),min:"0.01",max:"1.0",step:"0.01",className:"input-field"})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"premium-label",children:"Pillar Visibility"}),s.jsx("div",{className:"grid grid-cols-2 gap-3",children:e.visible.map(((i,a)=>s.jsx("button",{onClick:()=>{const s=[...e.visible];s[a]=!s[a],t({...e,visible:s})},className:"flex items-center justify-center space-x-2 p-2 rounded-lg transition-all "+(i?"bg-white/10 text-white":"bg-white/5 text-white/50"),children:i?s.jsxs(s.Fragment,{children:[s.jsx(J,{className:"w-4 h-4"}),s.jsxs("span",{className:"text-sm",children:["Pillar ",a+1]})]}):s.jsxs(s.Fragment,{children:[s.jsx(q,{className:"w-4 h-4"}),s.jsxs("span",{className:"text-sm",children:["Pillar ",a+1]})]})},`pillar-visibility-${a}`)))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"premium-label",children:"Number of Pillars"}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("button",{onClick:()=>{if(e.count>2){const s=e.count-1,i=[...e.visible];i.pop(),t({...e,count:s,visible:i})}},disabled:e.count<=2,className:"w-8 h-8 flex items-center justify-center rounded-full bg-white/10 text-white hover:bg-white/20 disabled:opacity-50 disabled:cursor-not-allowed",children:"-"}),s.jsx("span",{className:"text-lg font-medium text-white",children:e.count}),s.jsx("button",{onClick:()=>{const s=e.count+1,i=[...e.visible,!0];t({...e,count:s,visible:i})},disabled:e.count>=12,className:"w-8 h-8 flex items-center justify-center rounded-full bg-white/10 text-white hover:bg-white/20 disabled:opacity-50 disabled:cursor-not-allowed",children:"+"})]}),s.jsx("p",{className:"text-xs text-white/50 mt-1",children:"Min: 2, Max: 12 pillars"})]}),s.jsxs("div",{className:"mt-4",children:[s.jsx("label",{className:"premium-label",children:"Pillar Configuration Presets"}),s.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[s.jsx("button",{onClick:()=>t({...e,count:4,visible:[!0,!0,!0,!0],size:{width:.1,depth:.1}}),className:"p-2 bg-white/5 hover:bg-white/10 rounded-lg text-xs transition-all",children:"Standard"}),s.jsx("button",{onClick:()=>t({...e,count:6,visible:[!0,!0,!0,!0,!0,!0],size:{width:.15,depth:.15}}),className:"p-2 bg-white/5 hover:bg-white/10 rounded-lg text-xs transition-all",children:"Enhanced"}),s.jsx("button",{onClick:()=>t({...e,count:8,visible:[!0,!0,!0,!0,!0,!0,!0,!0],size:{width:.2,depth:.2}}),className:"p-2 bg-white/5 hover:bg-white/10 rounded-lg text-xs transition-all",children:"Premium"})]})]}),s.jsx("div",{className:"mt-4 p-3 bg-white/5 rounded-lg",children:s.jsxs("p",{className:"text-sm text-white/60",children:[s.jsx("span",{className:"text-blue-400 font-medium",children:"AI Suggestion:"})," ",e.count<4?"Minimal pillar design creates an open, airy feel but may require additional structural considerations.":e.count>8?"Extended pillar configuration provides maximum stability and a grand architectural statement.":`${e.count}-pillar configuration balances aesthetics with structural integrity.`]})})]})]})}const Pe=new class{constructor(){this.interactionHistory=[],this.observationPhase=!0,this.independentLearningPhase=!1,this.learnedPatterns={dimensions:{},materials:{},pillars:{},rafters:{}},this.errorPrevention={structuralIntegrity:{check:this.checkStructuralIntegrity,message:"The current dimensions may create structural stability issues."},materialCompatibility:{check:this.checkMaterialCompatibility,message:"The selected materials may not be optimal for your environment."},aestheticBalance:{check:this.checkAestheticBalance,message:"Consider adjusting the rafter spacing for better visual balance."}}}recordInteraction(e,t){const s={type:e,data:t,timestamp:(new Date).toISOString()};return this.interactionHistory.push(s),this.observationPhase&&this.updateLearnedPatterns(s),s}updateLearnedPatterns(e){const{type:t,data:s}=e;switch(t){case"dimension_change":this.learnedPatterns.dimensions[s.dimension]||(this.learnedPatterns.dimensions[s.dimension]=[]),this.learnedPatterns.dimensions[s.dimension].push(s.value);break;case"material_select":this.learnedPatterns.materials[s.material]||(this.learnedPatterns.materials[s.material]=0),this.learnedPatterns.materials[s.material]++;break;case"pillar_change":this.learnedPatterns.pillars[s.property]||(this.learnedPatterns.pillars[s.property]=[]),this.learnedPatterns.pillars[s.property].push(s.value);break;case"rafter_change":this.learnedPatterns.rafters[s.property]||(this.learnedPatterns.rafters[s.property]=[]),this.learnedPatterns.rafters[s.property].push(s.value)}}generateRecommendations(e){const t=[],s=this.checkForErrors(e);if(t.push(...s),e.dimensions){const s=this.generateDimensionRecommendations(e.dimensions);t.push(...s)}if(e.material){const s=this.generateMaterialRecommendations(e.material,e.materialColor);t.push(...s)}if(e.pillars&&e.rafters){const s=this.generateCustomizationRecommendations(e.pillars,e.rafters);t.push(...s)}return t}checkForErrors(e){const t=[];return this.errorPrevention.structuralIntegrity.check(e)&&t.push({type:"error",category:"structural",message:this.errorPrevention.structuralIntegrity.message,severity:"high"}),this.errorPrevention.materialCompatibility.check(e)&&t.push({type:"error",category:"material",message:this.errorPrevention.materialCompatibility.message,severity:"medium"}),this.errorPrevention.aestheticBalance.check(e)&&t.push({type:"warning",category:"aesthetic",message:this.errorPrevention.aestheticBalance.message,severity:"low"}),t}checkStructuralIntegrity(e){const{dimensions:t,pillars:s}=e,i=t.length*t.width,a=s.count/i;return i>15&&a<.5}checkMaterialCompatibility(e){const{material:t,dimensions:s}=e;return"wood"===t&&s.length*s.width>20}checkAestheticBalance(e){const{rafters:t,dimensions:s}=e,i=Math.sqrt(s.length*s.width)/10,a=t.spacing;return Math.abs(a-i)>.3}generateDimensionRecommendations(e){const t=[],s=[{length:3,width:3,height:2.5},{length:4,width:3,height:2.5},{length:5,width:4,height:2.8}];let i=null,a=1/0;for(const n of s){const t=Math.abs(n.length-e.length)+Math.abs(n.width-e.width)+Math.abs(n.height-e.height);t<a&&t>.5&&(a=t,i=n)}return i&&t.push({type:"suggestion",category:"dimensions",message:`Consider standard dimensions of ${i.length}m x ${i.width}m x ${i.height}m for better proportions.`,value:i}),t}generateMaterialRecommendations(e,t){const s=[],i={aluminium:["wood","composite"],wood:["aluminium","steel"],steel:["wood","glass"],composite:["aluminium","glass"]};if(i[e]){const t=i[e][0];s.push({type:"suggestion",category:"material",message:`${t.charAt(0).toUpperCase()+t.slice(1)} accents would complement your ${e} pergola beautifully.`,value:t})}return s}generateCustomizationRecommendations(e,t){const s=[];return"crosshatch"!==t.pattern&&e.count>=6&&s.push({type:"suggestion",category:"rafters",message:"A crosshatch rafter pattern would enhance the visual appeal of your larger pergola design.",value:{pattern:"crosshatch"}}),t.spacing>.4&&s.push({type:"suggestion",category:"rafters",message:"Reducing rafter spacing to 0.3m would provide better shade while maintaining the open feel.",value:{spacing:.3}}),s}transitionToIndependentLearning(){this.observationPhase=!1,this.independentLearningPhase=!0}},De=({rafters:t,onRaftersChange:i})=>{const[a,n]=e.useState("frontToBack"),[r,l]=e.useState(null),o=e=>{i({...e,forceUpdate:!0})},c=e=>{const s={...t,pattern:e};o(s),Pe.trackInteraction("rafter_pattern_changed",{pattern:e})},d=(e,s)=>{const i=Math.max(2,Math.min(20,s)),a=JSON.parse(JSON.stringify(t)),n=a[e].items||[];let c=[...n];if(i>n.length){const e=i-n.length,t=Array(e).fill().map((()=>({visible:!0,curvature:0,selected:!1})));c=[...c,...t]}else i<n.length&&(c=c.slice(0,i));a[e].count=i,a[e].items=c,null!==r&&r>=i&&l(null),o(a),Pe.trackInteraction("rafter_count_changed",{direction:e,count:i})},m=(e,s)=>{const i=JSON.parse(JSON.stringify(t));i[e].shape=s,o(i),Pe.trackInteraction("rafter_shape_changed",{direction:e,shape:s})};return s.jsxs(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.2},className:"premium-card",children:[s.jsxs("div",{className:"panel-title",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:s.jsx("path",{d:"M2 12h20M2 12v-2a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v2M2 12v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2"})}),s.jsx("h2",{children:"Rafter Customization"})]}),s.jsxs("div",{className:"mb-5",children:[s.jsx("label",{className:"premium-label",children:"Pattern"}),s.jsxs("div",{className:"flex space-x-2 mt-1.5",children:[s.jsx("button",{className:"premium-button "+("parallel"===t.pattern?"active":""),onClick:()=>c("parallel"),children:"Parallel"}),s.jsx("button",{className:"premium-button "+("crosshatch"===t.pattern?"active":""),onClick:()=>c("crosshatch"),children:"Crosshatch"})]})]}),s.jsx("div",{className:"mb-4",children:s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{className:"premium-tab "+("frontToBack"===a?"active":""),onClick:()=>{n("frontToBack"),l(null)},children:"Front-to-Back"}),s.jsx("button",{className:"premium-tab "+("leftToRight"===a?"active":""),onClick:()=>{n("leftToRight"),l(null)},children:"Side-to-Side"})]})}),s.jsxs("div",{className:"mb-4 p-3 bg-black/30 rounded-lg border border-white/10",children:[s.jsxs("div",{className:"flex justify-between items-center mb-3",children:[s.jsxs("label",{className:"premium-label m-0",children:["All ",(h=a,"frontToBack"===h?"Front-to-Back":"Side-to-Side")," Rafters"]}),s.jsx("button",{className:"premium-toggle "+(t[a].visible?"active":""),onClick:()=>(e=>{const s=JSON.parse(JSON.stringify(t));s[e].visible=!s[e].visible,o(s),Pe.trackInteraction("rafter_visibility_changed",{direction:e,visible:s[e].visible})})(a),children:t[a].visible?"Visible":"Hidden"})]}),s.jsxs("div",{className:"mb-4",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("label",{className:"premium-label",children:"Count"}),s.jsx("span",{className:"text-sm text-white/90",children:t[a].count})]}),s.jsxs("div",{className:"premium-number-input w-full",children:[s.jsx("button",{onClick:()=>d(a,t[a].count-1),className:"premium-number-button",children:""}),s.jsx("input",{type:"number",value:t[a].count,onChange:e=>d(a,parseInt(e.target.value)||0),min:"2",max:"20",className:"premium-number-field"}),s.jsx("button",{onClick:()=>d(a,t[a].count+1),className:"premium-number-button",children:"+"})]})]}),s.jsxs("div",{className:"mb-4",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("label",{className:"premium-label",children:"Gap"}),s.jsxs("span",{className:"text-sm text-white/90",children:[t[a].gap.toFixed(2),"m"]})]}),s.jsx("input",{type:"range",min:"0.05",max:"0.5",step:"0.01",value:t[a].gap,onChange:e=>((e,s)=>{const i=JSON.parse(JSON.stringify(t));i[e].gap=parseFloat(s),o(i),Pe.trackInteraction("rafter_gap_changed",{direction:e,gap:parseFloat(s)})})(a,e.target.value),className:"premium-slider"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("label",{className:"premium-label",children:"Width"}),s.jsxs("span",{className:"text-sm text-white/90",children:[t[a].width.toFixed(2),"m"]})]}),s.jsx("input",{type:"range",min:"0.01",max:"0.2",step:"0.01",value:t[a].width,onChange:e=>((e,s)=>{const i=JSON.parse(JSON.stringify(t));i[e].width=parseFloat(s),o(i),Pe.trackInteraction("rafter_width_changed",{direction:e,width:parseFloat(s)})})(a,e.target.value),className:"premium-slider"})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("label",{className:"premium-label",children:"Height"}),s.jsxs("span",{className:"text-sm text-white/90",children:[t[a].height.toFixed(2),"m"]})]}),s.jsx("input",{type:"range",min:"0.01",max:"0.2",step:"0.01",value:t[a].height,onChange:e=>((e,s)=>{const i=JSON.parse(JSON.stringify(t));i[e].height=parseFloat(s),o(i),Pe.trackInteraction("rafter_height_changed",{direction:e,height:parseFloat(s)})})(a,e.target.value),className:"premium-slider"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"premium-label",children:"Shape"}),s.jsxs("div",{className:"flex space-x-2 mt-1.5",children:[s.jsx("button",{className:"premium-button "+("square"===t[a].shape?"active":""),onClick:()=>m(a,"square"),children:"Square"}),s.jsx("button",{className:"premium-button "+("round"===t[a].shape?"active":""),onClick:()=>m(a,"round"),children:"Round"})]})]})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"premium-label",children:"Select Individual Rafter"}),s.jsx("div",{className:"grid grid-cols-5 gap-2 mb-2",children:t[a].items.map(((e,t)=>s.jsx("button",{className:`premium-rafter-button ${r===t?"active":""} ${e.visible?"":"invisible"}`,onClick:()=>(e=>{l(e===r?null:e)})(t),children:t+1},t)))}),s.jsx("p",{className:"text-xs text-white/70 mb-4",children:"Click on a rafter number to select it for individual customization"})]}),null!==r&&s.jsxs(x.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},className:"mb-4 p-3 bg-black/30 rounded-lg border border-white/10",children:[s.jsxs("div",{className:"flex justify-between items-center mb-3",children:[s.jsxs("label",{className:"premium-label m-0",children:["Rafter ",r+1," Controls"]}),s.jsx("button",{className:"premium-toggle "+(t[a].items[r].visible?"active":""),onClick:()=>((e,s)=>{const i=JSON.parse(JSON.stringify(t));i[e].items[s].visible=!i[e].items[s].visible,o(i),Pe.trackInteraction("individual_rafter_visibility_changed",{direction:e,index:s,visible:i[e].items[s].visible})})(a,r),children:t[a].items[r].visible?"Visible":"Hidden"})]}),s.jsxs("div",{className:"mb-1",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("label",{className:"premium-label",children:"Curvature"}),s.jsx("span",{className:"text-sm text-white/90",children:t[a].items[r].curvature.toFixed(2)})]}),s.jsx("input",{type:"range",min:"-0.5",max:"0.5",step:"0.01",value:t[a].items[r].curvature,onChange:e=>((e,s,i)=>{const a=JSON.parse(JSON.stringify(t));a[e].items[s].curvature=parseFloat(i),o(a),Pe.trackInteraction("individual_rafter_curvature_changed",{direction:e,index:s,curvature:parseFloat(i)})})(a,r,e.target.value),className:"premium-slider"}),s.jsxs("div",{className:"flex justify-between text-xs text-white/70 mt-1",children:[s.jsx("span",{children:"Concave"}),s.jsx("span",{children:"Flat"}),s.jsx("span",{children:"Convex"})]})]})]}),null===r&&s.jsx("div",{className:"text-center p-3 bg-black/30 rounded-lg border border-white/10",children:s.jsx("p",{className:"text-sm text-white/80",children:"Select a rafter number above to customize individual rafters"})})]});var h},Fe=({glass:t,onGlassChange:i})=>{var a,n,r,l,o,c,d,m,h,u,g,p,b,w,f,v,j,y;const[N,k]=e.useState("main"),C=e=>{i(e)},S=e=>{var s,i;const a={...t.sides,[e]:!(null==(s=t.sides)?void 0:s[e])},n={...t,sides:a};C(n),Pe.trackInteraction("glass_side_toggled",{side:e,visible:!(null==(i=t.sides)?void 0:i[e])})},L=(e,s)=>{var i;const a={...t.position,[e]:((null==(i=t.position)?void 0:i[e])||0)+s},n={...t,position:a};C(n),Pe.trackInteraction("glass_position_changed",{axis:e,value:s,newPosition:a})},M=(e,s)=>{const i={...t.position,[e]:parseFloat(s)},a={...t,position:i};C(a)};return s.jsxs(x.div,{className:"premium-control-panel glass-control-panel",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:[s.jsxs("div",{className:"premium-panel-header",children:[s.jsx("h3",{className:"text-lg font-medium",children:"Glass Control"}),s.jsx("div",{className:"flex space-x-2 mt-2",children:[{id:"main",label:"Main"},{id:"sides",label:"Sides"},{id:"position",label:"Position"}].map((e=>s.jsx("button",{className:"glass-tab-button "+(N===e.id?"active":""),onClick:()=>k(e.id),children:e.label},e.id)))})]}),s.jsxs("div",{className:"premium-panel-content",children:["main"===N&&s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("span",{className:"text-sm font-medium",children:"Glass Panel"}),s.jsx("button",{className:"premium-toggle-button "+(t.visible?"active":""),onClick:()=>{const e={...t,visible:!t.visible};C(e)},children:t.visible?"Visible":"Hidden"})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("div",{className:"text-sm font-medium mb-2",children:"Glass Color"}),s.jsx("div",{className:"grid grid-cols-3 gap-3",children:[{name:"Crystal Blue",value:"#a9c2d9"},{name:"Emerald Tint",value:"#88b999"},{name:"Smoky Quartz",value:"#6b5b5b"}].map((e=>s.jsx("button",{className:"glass-color-button "+(t.color===e.value?"active":""),style:{backgroundColor:`${e.value}80`},onClick:()=>(e=>{const s={...t,color:e.value};C(s),Pe.trackInteraction("glass_color_changed",{color:e.name,colorValue:e.value})})(e),children:s.jsx("div",{className:"glass-color-name",children:e.name})},e.name)))})]}),s.jsxs("div",{className:"mb-4",children:[s.jsxs("div",{className:"flex justify-between items-center mb-1",children:[s.jsx("span",{className:"text-sm font-medium",children:"Glass Thickness"}),s.jsxs("span",{className:"text-xs",children:[t.thickness.toFixed(1)," cm"]})]}),s.jsx("input",{type:"range",min:"0.3",max:"1.5",step:"0.1",value:t.thickness,onChange:e=>{const s=parseFloat(e.target.value),i={...t,thickness:s};C(i)},className:"premium-slider"})]}),s.jsxs("div",{className:"mb-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-1",children:[s.jsx("span",{className:"text-sm font-medium",children:"Glass Extension"}),s.jsxs("span",{className:"text-xs",children:[t.extension.toFixed(2)," m"]})]}),s.jsx("input",{type:"range",min:"0",max:"0.5",step:"0.01",value:t.extension,onChange:e=>{const s=parseFloat(e.target.value),i={...t,extension:s};C(i)},className:"premium-slider"})]}),s.jsxs("div",{className:"flex space-x-2 mb-4",children:[s.jsx("button",{className:"glass-action-btn w-1/2",onClick:()=>{const e={...t,applied:!0,visible:!0,thickness:t.thickness||.8,extension:t.extension||.1,color:t.color||"#a9c2d9",opacity:t.opacity||.6};C(e),Pe.trackInteraction("glass_applied",{color:e.color,thickness:e.thickness,extension:e.extension})},disabled:t.applied,children:"Apply Glass"}),s.jsx("button",{className:"glass-action-btn w-1/2",onClick:()=>{const e={...t,applied:!1,visible:!1};C(e),Pe.trackInteraction("glass_removed",{})},disabled:!t.applied,children:"Remove Glass"})]}),s.jsx("button",{className:"glass-action-btn w-full",onClick:()=>{C({visible:!1,applied:!1,color:"#a9c2d9",opacity:.6,thickness:.8,extension:.1,position:{x:0,y:0,z:0},sides:{top:!0,bottom:!1,front:!1,back:!1,left:!1,right:!1}}),Pe.trackInteraction("glass_reset_all",{})},children:"Reset All Glass Settings"})]}),"sides"===N&&s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium mb-4",children:"Glass Panel Configuration"}),s.jsxs("div",{className:"mb-4 p-3 bg-blue-900/30 rounded-md",children:[s.jsx("p",{className:"text-sm mb-2",children:"Recommended: Use only the top panel for a clean look"}),s.jsx("button",{className:"glass-action-btn w-full",onClick:()=>{const e={...t,sides:{top:!0,bottom:!1,front:!1,back:!1,left:!1,right:!1}};C(e),Pe.trackInteraction("glass_show_only_top",{})},children:"Show Only Top Panel"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[s.jsxs("button",{className:"glass-side-btn "+((null==(a=t.sides)?void 0:a.top)?"active":""),onClick:()=>S("top"),children:["Top ",(null==(n=t.sides)?void 0:n.top)?"Visible":"Hidden"]}),s.jsxs("button",{className:"glass-side-btn "+((null==(r=t.sides)?void 0:r.bottom)?"active":""),onClick:()=>S("bottom"),children:["Bottom ",(null==(l=t.sides)?void 0:l.bottom)?"Visible":"Hidden"]}),s.jsxs("button",{className:"glass-side-btn "+((null==(o=t.sides)?void 0:o.front)?"active":""),onClick:()=>S("front"),children:["Front ",(null==(c=t.sides)?void 0:c.front)?"Visible":"Hidden"]}),s.jsxs("button",{className:"glass-side-btn "+((null==(d=t.sides)?void 0:d.back)?"active":""),onClick:()=>S("back"),children:["Back ",(null==(m=t.sides)?void 0:m.back)?"Visible":"Hidden"]}),s.jsxs("button",{className:"glass-side-btn "+((null==(h=t.sides)?void 0:h.left)?"active":""),onClick:()=>S("left"),children:["Left ",(null==(u=t.sides)?void 0:u.left)?"Visible":"Hidden"]}),s.jsxs("button",{className:"glass-side-btn "+((null==(g=t.sides)?void 0:g.right)?"active":""),onClick:()=>S("right"),children:["Right ",(null==(p=t.sides)?void 0:p.right)?"Visible":"Hidden"]})]}),s.jsx("button",{className:"glass-action-btn w-full",onClick:()=>{const e={...t,sides:{top:!0,bottom:!0,front:!0,back:!0,left:!0,right:!0}};C(e),Pe.trackInteraction("glass_show_all_sides",{})},children:"Show All Sides"})]}),"position"===N&&s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium mb-4",children:"Adjust Glass Position"}),s.jsxs("div",{className:"flex flex-col space-y-4 mb-6",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-center mb-1",children:[s.jsx("span",{className:"text-sm",children:"X Position (Left/Right)"}),s.jsxs("span",{className:"text-xs",children:[((null==(b=t.position)?void 0:b.x)||0).toFixed(2)," m"]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("button",{className:"glass-control-btn",onClick:()=>L("x",-.1),children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:s.jsx("path",{d:"M19 12H5M5 12L12 19M5 12L12 5"})})}),s.jsx("input",{type:"range",min:"-1",max:"1",step:"0.01",value:(null==(w=t.position)?void 0:w.x)||0,onChange:e=>M("x",e.target.value),className:"premium-slider flex-grow"}),s.jsx("button",{className:"glass-control-btn",onClick:()=>L("x",.1),children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:s.jsx("path",{d:"M5 12h14m-4-4l4 4-4 4"})})})]})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-center mb-1",children:[s.jsx("span",{className:"text-sm",children:"Y Position (Up/Down)"}),s.jsxs("span",{className:"text-xs",children:[((null==(f=t.position)?void 0:f.y)||0).toFixed(2)," m"]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("button",{className:"glass-control-btn",onClick:()=>L("y",-.1),children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:s.jsx("path",{d:"M12 19V5m0 0l-7 7m7-7l7 7"})})}),s.jsx("input",{type:"range",min:"-1",max:"1",step:"0.01",value:(null==(v=t.position)?void 0:v.y)||0,onChange:e=>M("y",e.target.value),className:"premium-slider flex-grow"}),s.jsx("button",{className:"glass-control-btn",onClick:()=>L("y",.1),children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:s.jsx("path",{d:"M12 5v14m0 0l-7-7m7 7l7-7"})})})]})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-center mb-1",children:[s.jsx("span",{className:"text-sm",children:"Z Position (Front/Back)"}),s.jsxs("span",{className:"text-xs",children:[((null==(j=t.position)?void 0:j.z)||0).toFixed(2)," m"]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("button",{className:"glass-control-btn",onClick:()=>L("z",-.1),children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:s.jsx("path",{d:"M12 19V5m0 0l-7 7m7-7l7 7"})})}),s.jsx("input",{type:"range",min:"-1",max:"1",step:"0.01",value:(null==(y=t.position)?void 0:y.z)||0,onChange:e=>M("z",e.target.value),className:"premium-slider flex-grow"}),s.jsx("button",{className:"glass-control-btn",onClick:()=>L("z",.1),children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:s.jsx("path",{d:"M12 5v14m0 0l-7-7m7 7l7-7"})})})]})]})]}),s.jsx("button",{className:"glass-reset-btn w-full",onClick:()=>{const e={...t,position:{x:0,y:0,z:0}};C(e)},children:"Reset Position"})]})]})]})},Ee=({pergolaPosition:e,onPositionChange:t})=>{const i=(s,i)=>{const a={...e,[s]:(null==e?void 0:e[s])+i||i};t(a),Pe.recordInteraction("pergola_position_changed",{axis:s,value:i,newPosition:a})};return s.jsxs(x.div,{className:"premium-control-panel",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:[s.jsx("div",{className:"premium-panel-header",children:s.jsx("h3",{className:"text-lg font-medium",children:"Pergola Position"})}),s.jsxs("div",{className:"premium-panel-content",children:[s.jsx("div",{className:"text-sm font-medium mb-4",children:"Adjust Pergola Position"}),s.jsxs("div",{className:"flex flex-col space-y-4 mb-6",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-center mb-1",children:[s.jsx("span",{className:"text-sm",children:"X Position (Left/Right)"}),s.jsxs("span",{className:"text-xs",children:[((null==e?void 0:e.x)||0).toFixed(2)," m"]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("button",{className:"premium-rafter-button",onClick:()=>i("x",-.1),children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:s.jsx("path",{d:"M19 12l-7 7-7-7"})})}),s.jsx("input",{type:"range",min:"-2",max:"2",step:"0.01",value:(null==e?void 0:e.x)||0,onChange:s=>{const i={...e,x:parseFloat(s.target.value)};t(i)},className:"premium-slider flex-grow"}),s.jsx("button",{className:"premium-rafter-button",onClick:()=>i("x",.1),children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:s.jsx("path",{d:"M5 12l7 7 7-7"})})})]})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-center mb-1",children:[s.jsx("span",{className:"text-sm",children:"Y Position (Up/Down)"}),s.jsxs("span",{className:"text-xs",children:[((null==e?void 0:e.y)||0).toFixed(2)," m"]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("button",{className:"premium-rafter-button",onClick:()=>i("y",-.1),children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:s.jsx("path",{d:"M19 12l-7 7-7-7"})})}),s.jsx("input",{type:"range",min:"-2",max:"2",step:"0.01",value:(null==e?void 0:e.y)||0,onChange:s=>{const i={...e,y:parseFloat(s.target.value)};t(i)},className:"premium-slider flex-grow"}),s.jsx("button",{className:"premium-rafter-button",onClick:()=>i("y",.1),children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:s.jsx("path",{d:"M5 12l7 7 7-7"})})})]})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-center mb-1",children:[s.jsx("span",{className:"text-sm",children:"Z Position (Front/Back)"}),s.jsxs("span",{className:"text-xs",children:[((null==e?void 0:e.z)||0).toFixed(2)," m"]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("button",{className:"premium-rafter-button",onClick:()=>i("z",-.1),children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:s.jsx("path",{d:"M19 12l-7 7-7-7"})})}),s.jsx("input",{type:"range",min:"-2",max:"2",step:"0.01",value:(null==e?void 0:e.z)||0,onChange:s=>{const i={...e,z:parseFloat(s.target.value)};t(i)},className:"premium-slider flex-grow"}),s.jsx("button",{className:"premium-rafter-button",onClick:()=>i("z",.1),children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:s.jsx("path",{d:"M5 12l7 7 7-7"})})})]})]})]}),s.jsx("button",{className:"premium-rafter-button w-full",onClick:()=>{t({x:0,y:0,z:0})},children:"Reset Position"})]})]})};function Te({environment:e,timeOfDay:t,onEnvironmentChange:i,onTimeOfDayChange:a}){return s.jsxs(x.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-black/30 backdrop-blur-xl rounded-xl p-2 border border-white/10",children:[s.jsxs("div",{className:"mb-2 pb-2 border-b border-white/10",children:[s.jsx("p",{className:"text-xs text-white/70 mb-1 text-center",children:"Environment"}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{onClick:()=>i("sunset"),className:"p-2 rounded-lg transition-all "+("sunset"===e?"bg-white/20 text-white":"text-white/50 hover:bg-white/10 hover:text-white/80"),title:"Sunset",children:s.jsx(ne,{className:"w-5 h-5"})}),s.jsx("button",{onClick:()=>i("forest"),className:"p-2 rounded-lg transition-all "+("forest"===e?"bg-white/20 text-white":"text-white/50 hover:bg-white/10 hover:text-white/80"),title:"Forest",children:s.jsx(W,{className:"w-5 h-5"})})]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-white/70 mb-1 text-center",children:"Time"}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{onClick:()=>a("day"),className:"p-2 rounded-lg transition-all "+("day"===t?"bg-white/20 text-white":"text-white/50 hover:bg-white/10 hover:text-white/80"),title:"Day Time",children:s.jsx(ce,{className:"w-5 h-5"})}),s.jsx("button",{onClick:()=>a("night"),className:"p-2 rounded-lg transition-all "+("night"===t?"bg-white/20 text-white":"text-white/50 hover:bg-white/10 hover:text-white/80"),title:"Night Time",children:s.jsx(ie,{className:"w-5 h-5"})})]})]})]})}function Re({dimensions:t,material:i,materialColor:a,pillars:n,rafters:r,onClose:l,onApplyRecommendation:o}){const[c,d]=e.useState([]),[m,h]=e.useState(!0);e.useEffect((()=>{h(!0),Pe.recordInteraction("design_update",{dimensions:t,material:i,materialColor:a,pillars:n,rafters:r});const e=setTimeout((()=>{const e={dimensions:t,material:i,materialColor:a,pillars:n,rafters:r},l=Pe.generateRecommendations(e),o=[...[{id:1,title:"Optimized Dimensions",description:"Balanced proportions for aesthetic appeal and stability",dimensions:{length:4.5,width:3.2,height:2.7},material:i,materialColor:a,pillars:n,rafters:r,icon:s.jsx(C,{className:"h-4 w-4"}),preview:"4.5m  3.2m  2.7m",category:"dimensions"},{id:2,title:"Material Upgrade",description:"Enhanced durability with premium material selection",dimensions:t,material:"aluminium"===i?"wpc":"aluminium",materialColor:"aluminium"===i?"#8B4513":"#a8a8a8",pillars:n,rafters:r,icon:s.jsx(me,{className:"h-4 w-4"}),preview:"aluminium"===i?"WPC":"Aluminium",category:"material"},{id:3,title:"Architectural Balance",description:"Golden ratio proportions for visual harmony",dimensions:{length:parseFloat((1.618*t.width).toFixed(1)),width:t.width,height:t.height},material:i,materialColor:a,pillars:n,rafters:r,icon:s.jsx(K,{className:"h-4 w-4"}),preview:`${(1.618*t.width).toFixed(1)}m  ${t.width}m  ${t.height}m`,category:"dimensions"},{id:4,title:"Structural Optimization",description:"Improved pillar configuration for enhanced stability",dimensions:t,material:i,materialColor:a,pillars:{...n,count:6,visible:[...n.visible.slice(0,4),!0,!0]},rafters:r,icon:s.jsx(ne,{className:"h-4 w-4"}),preview:"6-Pillar Configuration",category:"structure"},{id:5,title:"Color Harmony",description:"Optimized color palette based on material properties",dimensions:t,material:i,materialColor:"wpc"===i?"#6D4C41":"aluminium"===i?"#B0BEC5":"wood"===i?"#8D6E63":"#455A64",pillars:n,rafters:r,icon:s.jsx(me,{className:"h-4 w-4"}),preview:"Enhanced Color Palette",category:"color"},{id:6,title:"Rafter Spacing Optimization",description:"Balanced rafter spacing for optimal light filtration",dimensions:t,material:i,materialColor:a,pillars:n,rafters:{...r,spacing:.35,direction:"front-back"},icon:s.jsx(K,{className:"h-4 w-4"}),preview:"Optimized Light Filtration",category:"rafters"}],...l.filter((e=>"error"===e.type||"warning"===e.type)).map(((e,l)=>({id:100+l,title:"error"===e.type?"Design Issue Detected":"Design Suggestion",description:e.message,dimensions:"dimensions"===e.category?e.value:t,material:"material"===e.category?e.value:i,materialColor:a,pillars:"structural"===e.category?{...n,count:6}:n,rafters:"aesthetic"===e.category?{...r,spacing:.3}:r,icon:"error"===e.type?s.jsx(H,{className:"h-4 w-4 text-orange-400"}):s.jsx(F,{className:"h-4 w-4"}),preview:e.category.charAt(0).toUpperCase()+e.category.slice(1)+" Optimization",category:e.category,severity:e.severity||"medium"})))];d(o),h(!1)}),500);return()=>clearTimeout(e)}),[t,i,a,n,r]);const[u,g]=e.useState("all"),p="all"===u?c:c.filter((e=>e.category===u));return s.jsxs(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},transition:{duration:.3},className:"text-white bg-black/30 backdrop-blur-xl rounded-xl p-5 border border-white/10 shadow-xl",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(ne,{className:"h-5 w-5 text-blue-400"}),s.jsx("h3",{className:"text-xl font-medium",children:"AI Design Recommendations"})]}),s.jsx("button",{onClick:l,className:"p-1.5 rounded-full hover:bg-white/10 transition-colors",children:s.jsx(ge,{className:"h-5 w-5"})})]}),s.jsx("div",{className:"flex space-x-2 mb-6 overflow-x-auto pb-2",children:["all","dimensions","material","structural","aesthetic","color","rafters"].map((e=>s.jsx("button",{onClick:()=>g(e),className:"px-3 py-1.5 text-sm rounded-lg whitespace-nowrap transition-all "+(u===e?"bg-blue-600 text-white":"bg-white/5 text-white/70 hover:bg-white/10"),children:e.charAt(0).toUpperCase()+e.slice(1)},e)))}),m?s.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[s.jsx("div",{className:"w-10 h-10 border-2 border-blue-500 border-t-transparent rounded-full animate-spin mb-4"}),s.jsx("p",{className:"text-white/70 text-sm",children:"Analyzing your design and generating intelligent recommendations..."})]}):s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 max-h-[60vh] overflow-y-auto pr-1",children:p.map((e=>s.jsxs(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.05*e.id},className:"bg-gradient-to-br from-white/5 to-white/10 backdrop-blur-sm rounded-xl p-4 border border-white/10 hover:border-blue-500/50 hover:shadow-lg hover:shadow-blue-500/10 transition-all cursor-pointer group",onClick:()=>{return s=e,Pe.recordInteraction("apply_recommendation",{recommendationId:s.id,category:s.category,before:{dimensions:t,material:i,materialColor:a,pillars:n,rafters:r},after:{dimensions:s.dimensions,material:s.material,materialColor:s.materialColor,pillars:s.pillars,rafters:s.rafters}}),void o(s);var s},whileHover:{scale:1.02},whileTap:{scale:.98},children:[s.jsxs("div",{className:"flex items-center mb-3",children:[s.jsx("div",{className:"w-8 h-8 rounded-lg bg-blue-500/20 flex items-center justify-center mr-2 group-hover:bg-blue-500/30 transition-colors",children:e.icon||s.jsx(ne,{className:"h-4 w-4 text-blue-400"})}),s.jsx("h4",{className:"font-medium text-white group-hover:text-blue-300 transition-colors",children:e.title})]}),s.jsx("p",{className:"text-sm text-white/70 mb-3 line-clamp-2",children:e.description}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("div",{className:"text-xs font-mono bg-black/20 rounded-lg px-2 py-1 inline-block text-blue-300/80",children:e.preview}),s.jsx("div",{className:"text-blue-400 opacity-0 group-hover:opacity-100 transition-opacity",children:s.jsx(j,{className:"h-4 w-4"})})]}),s.jsxs("div",{className:"mt-3 pt-3 border-t border-white/5 text-xs text-white/40 flex justify-between",children:[s.jsxs("span",{children:["Category: ",e.category.charAt(0).toUpperCase()+e.category.slice(1)]}),e.severity&&s.jsxs("span",{className:""+("high"===e.severity?"text-red-400":"medium"===e.severity?"text-orange-400":"text-yellow-400"),children:[e.severity.charAt(0).toUpperCase()+e.severity.slice(1)," Priority"]})]})]},e.id)))}),!m&&s.jsxs("div",{className:"mt-6 pt-4 border-t border-white/10 flex justify-between items-center",children:[s.jsxs("p",{className:"text-xs text-white/50",children:[s.jsx(ne,{className:"h-3 w-3 inline mr-1"}),"Recommendations based on design principles and ergonomic standards"]}),s.jsx("button",{onClick:l,className:"px-3 py-1.5 text-sm bg-white/5 hover:bg-white/10 rounded-lg transition-colors",children:"Close"})]})]})}function ze(){const[t,i]=e.useState(0),[a,n]=e.useState(!1),[r,l]=e.useState("Initializing..."),[o,c]=e.useState(!1),d=e.useRef(null),m=e.useRef(null);return e.useEffect((()=>{const e=["Initializing 3D engine...","Loading materials...","Preparing geometry...","Configuring environment...","Optimizing rendering...","Almost ready..."],s=Math.min(Math.floor(t/20),e.length-1);l(e[s]);return(async()=>{try{const e=[new Promise((e=>{const t=new Image;t.onload=()=>e(),t.onerror=()=>e(),t.src="/src/assets/textures/wood.jpg"})),new Promise((e=>{const t=new Image;t.onload=()=>e(),t.onerror=()=>e(),t.src="/src/assets/textures/metal.jpg"}))];await Promise.all(e),c(!0)}catch(e){c(!0)}})(),d.current=setInterval((()=>{i((e=>{if(e>=90&&!o)return 90;if(e>=100)return clearInterval(d.current),m.current=setTimeout((()=>{n(!0)}),800),100;const t=e<70?2:1;return Math.min(e+t,100)}))}),50),()=>{d.current&&clearInterval(d.current),m.current&&clearTimeout(m.current)}}),[t,o]),e.useEffect((()=>{if(o&&t>=90&&t<100){const e=setTimeout((()=>{i(100)}),500);return()=>clearTimeout(e)}}),[o,t]),s.jsx(g,{mode:"wait",children:s.jsx(x.div,{className:"fixed inset-0 bg-black flex flex-col items-center justify-center z-50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.8},children:s.jsxs(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-center",children:[s.jsx("h1",{className:"text-4xl font-bold text-white mb-8",children:"LUXURY PERGOLA VISUALIZER"}),s.jsx("div",{className:"w-64 h-2 bg-white/20 rounded-full overflow-hidden mb-4",children:s.jsx(x.div,{className:"h-full bg-blue-500 rounded-full",initial:{width:0},animate:{width:`${t}%`},transition:{duration:.2}})}),s.jsx("p",{className:"text-white/70 text-sm mb-2",children:r}),s.jsxs("p",{className:"text-white/50 text-xs",children:[t,"% complete"]}),s.jsxs("div",{style:{display:"none"},"aria-hidden":"true",children:[s.jsx("img",{src:"/src/assets/textures/wood.jpg",alt:""}),s.jsx("img",{src:"/src/assets/textures/metal.jpg",alt:""}),s.jsx("img",{src:"/src/assets/textures/aluminium.jpg",alt:""}),s.jsx("img",{src:"/src/assets/textures/glass.jpg",alt:""})]})]})},"loading-screen")})}function Be({customerDetails:e,onCustomerDetailsChange:t,onSubmit:i,onCancel:a,isExporting:n}){const r=s=>{const{name:i,value:a}=s.target;t({...e,[i]:a})};return s.jsxs(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},className:"bg-black/50 backdrop-blur-xl p-6 rounded-xl border border-white/10 w-full max-w-md",children:[s.jsx("h3",{className:"text-xl font-medium text-white mb-4",children:"   (Customer Details)"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-white/70 mb-2",children:"  (Full Name) *"}),s.jsx("input",{type:"text",name:"name",value:e.name,onChange:r,className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter customer's full name",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-white/70 mb-2",children:" (Address) *"}),s.jsx("textarea",{name:"address",value:e.address,onChange:r,className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter customer's address",rows:"2",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-white/70 mb-2",children:"  (Mobile Number) *"}),s.jsx("input",{type:"tel",name:"mobile",value:e.mobile,onChange:r,className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter customer's mobile number",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-white/70 mb-2",children:" (Email Address)"}),s.jsx("input",{type:"email",name:"email",value:e.email,onChange:r,className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter customer's email address"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-white/70 mb-2",children:"  (Additional Information)"}),s.jsx("textarea",{name:"additionalInfo",value:e.additionalInfo,onChange:r,className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Any additional information or special requirements",rows:"2"})]}),s.jsxs("div",{className:"pt-4 flex space-x-3",children:[s.jsx("button",{onClick:a,className:"flex-1 py-3 px-4 bg-white/10 hover:bg-white/20 text-white rounded-lg transition-all",children:" (Back)"}),s.jsx("button",{onClick:i,disabled:n||!e.name||!e.address||!e.mobile,className:"flex-1 py-3 px-4 bg-blue-600 hover:bg-blue-700 text-white rounded-lg flex items-center justify-center space-x-2 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:s.jsx("span",{children:"  (Next)"})})]})]})]})}function Ie({selectedViews:t,onViewSelectionChange:i,rafters:a,pillars:n,dimensions:r}){const[l,o]=e.useState({resolution:"high",includeDetails:!0,includeMeasurements:!0,includeWatermark:!0}),[c,d]=e.useState(null),[m,h]=e.useState(!1),u=e.useRef(null),x=e.useRef(null),g=e=>{const s={...t,[e]:!t[e]};i(s),x.current&&clearTimeout(x.current),x.current=setTimeout((()=>{b()}),300)},p=(e,t)=>{o({...l,[e]:t})};e.useEffect((()=>{u.current&&(u.current.qualitySettings=l,u.current.selectedViews=t,u.current.pergolaDetails={rafters:a,pillars:n,dimensions:r})}),[l,t,a,n,r]);const b=()=>{if(!m){h(!0);try{const e=document.querySelector("canvas");if(e){const t=e.toDataURL("image/jpeg",.7);d(t)}}catch(e){}finally{h(!1)}}};e.useEffect((()=>(x.current&&clearTimeout(x.current),x.current=setTimeout((()=>{b()}),500),()=>{x.current&&clearTimeout(x.current)})),[t]),e.useEffect((()=>{const e=setTimeout((()=>{b()}),300);return()=>clearTimeout(e)}),[l]);const w=Object.values(t).filter(Boolean).length;return s.jsxs("div",{ref:u,"data-component-name":"ViewSelectionPanel",children:[s.jsxs("div",{className:"mb-6",children:[s.jsx("h4",{className:"text-md font-medium text-white/90 mb-2",children:"   (Quality Settings)"}),s.jsxs("div",{className:"bg-white/5 p-4 rounded-lg mb-4",children:[s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-sm font-medium text-white/70 mb-2",children:" (Resolution)"}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{onClick:()=>p("resolution","low"),className:"px-3 py-2 text-sm rounded-lg transition-all "+("low"===l.resolution?"bg-blue-600 text-white":"bg-white/10 text-white/70 hover:bg-white/20"),children:" (Low)"}),s.jsx("button",{onClick:()=>p("resolution","medium"),className:"px-3 py-2 text-sm rounded-lg transition-all "+("medium"===l.resolution?"bg-blue-600 text-white":"bg-white/10 text-white/70 hover:bg-white/20"),children:" (Medium)"}),s.jsx("button",{onClick:()=>p("resolution","high"),className:"px-3 py-2 text-sm rounded-lg transition-all "+("high"===l.resolution?"bg-blue-600 text-white":"bg-white/10 text-white/70 hover:bg-white/20"),children:" (High)"}),s.jsx("button",{onClick:()=>p("resolution","ultra"),className:"px-3 py-2 text-sm rounded-lg transition-all "+("ultra"===l.resolution?"bg-blue-600 text-white":"bg-white/10 text-white/70 hover:bg-white/20"),children:" (Ultra)"})]})]}),s.jsxs("div",{className:"flex flex-col space-y-3",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{id:"include-details",type:"checkbox",checked:l.includeDetails,onChange:()=>p("includeDetails",!l.includeDetails),className:"h-4 w-4 rounded border-white/30 text-blue-600 focus:ring-blue-500"}),s.jsx("label",{htmlFor:"include-details",className:"ml-2 block text-sm text-white/70",children:"    (Include Detailed Specifications)"})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{id:"include-measurements",type:"checkbox",checked:l.includeMeasurements,onChange:()=>p("includeMeasurements",!l.includeMeasurements),className:"h-4 w-4 rounded border-white/30 text-blue-600 focus:ring-blue-500"}),s.jsx("label",{htmlFor:"include-measurements",className:"ml-2 block text-sm text-white/70",children:"     (Include Measurements & Dimensions)"})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{id:"include-watermark",type:"checkbox",checked:l.includeWatermark,onChange:()=>p("includeWatermark",!l.includeWatermark),className:"h-4 w-4 rounded border-white/30 text-blue-600 focus:ring-blue-500"}),s.jsx("label",{htmlFor:"include-watermark",className:"ml-2 block text-sm text-white/70",children:"   (Include Watermark)"})]})]})]})]}),s.jsx("label",{className:"block text-md font-medium text-white/90 mb-2",children:"   (Select Pergola Views)"}),s.jsx("p",{className:"text-sm text-white/60 mb-3",children:0===w?"       (Please select at least one view)":`${w}    (${w} views selected)`}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{className:`flex items-center p-3 ${t.frontView?"bg-blue-600/30":"bg-white/5"} rounded-lg hover:bg-white/10 transition-colors cursor-pointer border ${t.frontView?"border-blue-500":"border-transparent"}`,onClick:()=>g("frontView"),children:[s.jsx("input",{id:"front-view",type:"checkbox",checked:t.frontView,onChange:()=>g("frontView"),className:"h-4 w-4 rounded border-white/30 text-blue-600 focus:ring-blue-500"}),s.jsx("label",{htmlFor:"front-view",className:"ml-2 block text-sm text-white/70 cursor-pointer",children:"   (Front View)"}),s.jsx("div",{className:"ml-auto w-8 h-8 flex items-center justify-center",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-white/50",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4"})})})]}),s.jsxs("div",{className:`flex items-center p-3 ${t.sideView?"bg-blue-600/30":"bg-white/5"} rounded-lg hover:bg-white/10 transition-colors cursor-pointer border ${t.sideView?"border-blue-500":"border-transparent"}`,onClick:()=>g("sideView"),children:[s.jsx("input",{id:"side-view",type:"checkbox",checked:t.sideView,onChange:()=>g("sideView"),className:"h-4 w-4 rounded border-white/30 text-blue-600 focus:ring-blue-500"}),s.jsx("label",{htmlFor:"side-view",className:"ml-2 block text-sm text-white/70 cursor-pointer",children:"  (Side View)"}),s.jsx("div",{className:"ml-auto w-8 h-8 flex items-center justify-center",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-white/50",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})]}),s.jsxs("div",{className:`flex items-center p-3 ${t.topView?"bg-blue-600/30":"bg-white/5"} rounded-lg hover:bg-white/10 transition-colors cursor-pointer border ${t.topView?"border-blue-500":"border-transparent"}`,onClick:()=>g("topView"),children:[s.jsx("input",{id:"top-view",type:"checkbox",checked:t.topView,onChange:()=>g("topView"),className:"h-4 w-4 rounded border-white/30 text-blue-600 focus:ring-blue-500"}),s.jsx("label",{htmlFor:"top-view",className:"ml-2 block text-sm text-white/70 cursor-pointer",children:"   (Top View)"}),s.jsx("div",{className:"ml-auto w-8 h-8 flex items-center justify-center",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-white/50",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 15l7-7 7 7"})})})]}),s.jsxs("div",{className:`flex items-center p-3 ${t.perspectiveView?"bg-blue-600/30":"bg-white/5"} rounded-lg hover:bg-white/10 transition-colors cursor-pointer border ${t.perspectiveView?"border-blue-500":"border-transparent"}`,onClick:()=>g("perspectiveView"),children:[s.jsx("input",{id:"perspective-view",type:"checkbox",checked:t.perspectiveView,onChange:()=>g("perspectiveView"),className:"h-4 w-4 rounded border-white/30 text-blue-600 focus:ring-blue-500"}),s.jsx("label",{htmlFor:"perspective-view",className:"ml-2 block text-sm text-white/70 cursor-pointer",children:"  (Perspective)"}),s.jsx("div",{className:"ml-auto w-8 h-8 flex items-center justify-center",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-white/50",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})})]}),s.jsxs("div",{className:`flex items-center p-3 ${t.customAngleView?"bg-blue-600/30":"bg-white/5"} rounded-lg hover:bg-white/10 transition-colors cursor-pointer border ${t.customAngleView?"border-blue-500":"border-transparent"}`,onClick:()=>g("customAngleView"),children:[s.jsx("input",{id:"custom-angle-view",type:"checkbox",checked:t.customAngleView,onChange:()=>g("customAngleView"),className:"h-4 w-4 rounded border-white/30 text-blue-600 focus:ring-blue-500"}),s.jsx("label",{htmlFor:"custom-angle-view",className:"ml-2 block text-sm text-white/70 cursor-pointer",children:"  (Custom Angle)"}),s.jsx("div",{className:"ml-auto w-8 h-8 flex items-center justify-center",children:s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-white/50",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})})]})]}),s.jsxs("div",{className:"mt-6 p-4 bg-white/5 rounded-lg",children:[s.jsx("h4",{className:"text-sm font-medium text-white/70 mb-2",children:"  (PDF Preview)"}),s.jsx("div",{className:"bg-white/10 p-3 rounded border border-white/20 flex items-center justify-center",children:c?s.jsxs("div",{className:"w-full flex flex-col items-center",children:[s.jsxs("div",{className:"relative w-full max-w-xs aspect-[4/3] overflow-hidden rounded-md mb-2",children:[s.jsx("img",{src:c,alt:"Pergola Preview",className:"w-full h-full object-cover"}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-transparent to-black/30 pointer-events-none"})]}),s.jsx("p",{className:"text-white/50 text-sm",children:0===w?"       (Please select at least one view)":`${w}    PDF (PDF with ${w} views)`}),s.jsx("p",{className:"text-white/40 text-xs mt-1",children:"ultra"===l.resolution?"   (Ultra High Quality)":"high"===l.resolution?"  (High Quality)":"medium"===l.resolution?"  (Medium Quality)":"  (Low Quality)"})]}):s.jsxs("div",{className:"text-center py-6",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-12 w-12 mx-auto text-white/30 mb-2 animate-pulse",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),s.jsx("p",{className:"text-white/50 text-sm",children:"    ... (Loading preview...)"})]})})]})]})}const Ve=({onExport:t,onCancel:i,customerDetails:a,setCustomerDetails:n,qualitySettings:r,setQualitySettings:l})=>{const[o,c]=e.useState("details"),d=e=>{const{name:t,value:s}=e.target;n((e=>({...e,[t]:s})))},m=(e,t)=>{l((s=>({...s,[e]:t})))};return s.jsxs(x.div,{className:"bg-white rounded-2xl shadow-2xl overflow-hidden w-full max-w-md text-gray-800",initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:[s.jsxs("div",{className:"bg-gradient-to-r from-gray-100 to-gray-200 px-6 py-4 border-b border-gray-300",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Export PDF"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Customize your luxury pergola export"})]}),s.jsxs("div",{className:"flex border-b border-gray-200",children:[s.jsx("button",{className:"flex-1 py-3 px-4 text-sm font-medium transition-colors duration-200 "+("details"===o?"text-blue-600 border-b-2 border-blue-600":"text-gray-500 hover:text-gray-700"),onClick:()=>c("details"),children:"Client Details"}),s.jsx("button",{className:"flex-1 py-3 px-4 text-sm font-medium transition-colors duration-200 "+("quality"===o?"text-blue-600 border-b-2 border-blue-600":"text-gray-500 hover:text-gray-700"),onClick:()=>c("quality"),children:"Quality Settings"})]}),s.jsx("div",{className:"max-h-[400px] overflow-y-auto p-6 custom-scrollbar",children:"details"===o?s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Client Name"}),s.jsx("input",{type:"text",name:"name",value:a.name||"",onChange:d,className:"w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 text-gray-700",placeholder:"Enter client name"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address"}),s.jsx("input",{type:"email",name:"email",value:a.email||"",onChange:d,className:"w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 text-gray-700",placeholder:"client@example.com"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number"}),s.jsx("input",{type:"tel",name:"mobile",value:a.mobile||"",onChange:d,className:"w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 text-gray-700",placeholder:"Enter phone number"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address"}),s.jsx("input",{type:"text",name:"address",value:a.address||"",onChange:d,className:"w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 text-gray-700",placeholder:"Enter client address"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Additional Notes"}),s.jsx("textarea",{name:"additionalInfo",value:a.additionalInfo||"",onChange:d,rows:"3",className:"w-full px-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 resize-none text-gray-700",placeholder:"Any special requirements or notes"})]})]}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"PDF Quality"}),s.jsx("div",{className:"space-y-2",children:["ultra","high","medium","low"].map((e=>s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"radio",id:`quality-${e}`,checked:r.resolution===e,onChange:()=>m("resolution",e),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded-full"}),s.jsx("label",{htmlFor:`quality-${e}`,className:"ml-3 block text-sm font-medium text-gray-700 capitalize",children:e})]},e)))})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Include in PDF"}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",id:"include-details",checked:r.includeDetails,onChange:()=>m("includeDetails",!r.includeDetails),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),s.jsx("label",{htmlFor:"include-details",className:"ml-3 block text-sm text-gray-700",children:"Detailed specifications"})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",id:"include-measurements",checked:r.includeMeasurements,onChange:()=>m("includeMeasurements",!r.includeMeasurements),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),s.jsx("label",{htmlFor:"include-measurements",className:"ml-3 block text-sm text-gray-700",children:"Measurements and dimensions"})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",id:"include-watermark",checked:r.includeWatermark,onChange:()=>m("includeWatermark",!r.includeWatermark),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),s.jsx("label",{htmlFor:"include-watermark",className:"ml-3 block text-sm text-gray-700",children:"Luxury watermark"})]})]})]})}),s.jsxs("div",{className:"bg-gray-50 px-6 py-4 flex justify-end space-x-3 border-t border-gray-200",children:[s.jsx("button",{onClick:i,className:"px-4 py-2 rounded-lg text-gray-700 hover:bg-gray-200 transition-colors duration-200 text-sm font-medium",children:"Cancel"}),s.jsx("button",{onClick:t,className:"px-4 py-2 rounded-lg bg-blue-600 text-white hover:bg-blue-700 transition-colors duration-200 text-sm font-medium",children:"Export PDF"})]})]})};class We extends l.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){}render(){return this.state.hasError?s.jsxs("group",{children:[s.jsxs("mesh",{position:[0,1,0],children:[s.jsx("boxGeometry",{args:[1,1,1]}),s.jsx("meshStandardMaterial",{color:"red"})]}),s.jsx("directionalLight",{position:[5,5,5],intensity:1})]}):this.props.children}}function Ae(){const[t,i]=e.useState({length:4,width:3,height:2.5}),[a,n]=e.useState("aluminium"),[r,l]=e.useState("#a8a8a8"),[u,b]=e.useState("sunset"),[w,f]=e.useState("day"),[v,j]=e.useState(null),[y,N]=e.useState(!0),[k,C]=e.useState({x:0,y:0,z:0}),[S,L]=e.useState({count:4,size:{width:.1,depth:.1},positions:[],visible:[!0,!0,!0,!0]}),[M,P]=e.useState({frontToBack:{count:5,width:.05,height:.1,gap:.2,visible:!0,shape:"square",items:Array(5).fill().map((()=>({visible:!0,curvature:0,selected:!1})))},leftToRight:{count:5,width:.05,height:.1,gap:.2,visible:!0,shape:"square",items:Array(5).fill().map((()=>({visible:!0,curvature:0,selected:!1})))},pattern:"crosshatch",style:"straight",visible:!0}),[D,F]=e.useState({visible:!1,applied:!1,color:"#a9c2d9",opacity:.6,thickness:.8,extension:.1,position:{x:0,y:0,z:0},sides:{top:!0,bottom:!1,front:!1,back:!1,left:!1,right:!1}}),[E,T]=e.useState("dimensions"),[R,z]=e.useState(!0),[B,I]=e.useState(!1),[V,W]=e.useState([]),[A,O]=e.useState(!1),[$,_]=e.useState({name:"",address:"",mobile:"",email:"",additionalInfo:""}),[G,H]=e.useState({frontView:!0,sideView:!0,topView:!0,perspectiveView:!0,customAngleView:!1}),[U,q]=e.useState(!1),[Z,J]=e.useState(!1),[Q,Y]=e.useState(!1),[X,K]=e.useState(!1),[ee,te]=e.useState("pdf"),[se,ie]=e.useState({resolution:"high",includeDetails:!0,includeMeasurements:!0,includeWatermark:!0}),[ae,ne]=e.useState(!1),[re,le]=e.useState(!1),[oe,ce]=e.useState(!1),[de,me]=e.useState(!1);e.useRef(null);const he=e.useRef(null),ue=e.useRef(null),xe=e.useRef(null);e.useEffect((()=>{const{length:e,width:s}=t,i=[[0,0,0],[e,0,0],[0,0,s],[e,0,s]];L((e=>({...e,positions:i})))}),[t]),e.useEffect((()=>{Pe.recordInteraction("app_init",{initialDesign:{dimensions:t,material:a,materialColor:r,pillars:S,rafters:M,environment:u,timeOfDay:w}});return(()=>{try{!0&&setTimeout((()=>{z(!1)}),1500)}catch(e){setTimeout((()=>{z(!1)}),3e3)}})(),()=>{}}),[]),e.useEffect((()=>{he.current}),[]),e.useEffect((()=>{y?(document.documentElement.classList.add("dark"),document.documentElement.classList.remove("light")):(document.documentElement.classList.add("light"),document.documentElement.classList.remove("dark"))}),[y]);const ge=e=>{Pe.recordInteraction("dimension_change",{dimension:Object.keys(e).find((s=>e[s]!==t[s])),value:Object.values(e).find(((e,s)=>e!==Object.values(t)[s])),previousDimensions:{...t},newDimensions:{...e}}),i(e)},we=e=>{let t;switch(e){case"wood":t="#8B4513";break;case"aluminium":default:t="#a8a8a8";break;case"iron":t="#404040";break;case"wpc":t="#DEB887"}Pe.recordInteraction("material_select",{material:e,previousMaterial:a,previousColor:r,newColor:t}),n(e),l(t)},fe=e=>{Pe.recordInteraction("pillar_change",{property:Object.keys(e)[0],value:Object.values(e)[0],previousPillars:{...S},newPillars:{...S,...e}}),L((t=>({...t,...e})))},Ce=e=>{var t,s;P(e),e.forceUpdate&&setTimeout((()=>{const t=JSON.parse(JSON.stringify(e));delete t.forceUpdate,P(t)}),0),Pe.trackInteraction("rafters_updated",{pattern:e.pattern,frontToBackCount:null==(t=e.frontToBack)?void 0:t.count,leftToRightCount:null==(s=e.leftToRight)?void 0:s.count})},Se=e=>{Pe.recordInteraction("glass_change",{previousGlass:{...D},newGlass:{...e}}),F(e)},Ae=async()=>{Y(!0);const e=document.querySelector("canvas");if(!e)throw new Error("Canvas element not found");const s=document.createElement("canvas"),i=s.getContext("2d");let n=.8,l=2;switch(se.resolution){case"ultra":n=1,l=3;break;case"high":n=.8,l=2;break;case"medium":n=.6,l=1.5;break;case"low":n=.4,l=1}const o=e.width,c=e.height;s.width=o*l,s.height=c*l;const d={position:{x:ue.current.position.x,y:ue.current.position.y,z:ue.current.position.z},rotation:{x:ue.current.rotation.x,y:ue.current.rotation.y,z:ue.current.rotation.z}},m=(t,a,r,l,o,c)=>new Promise((d=>{ue.current.position.set(t,a,r),ue.current.lookAt(l,o,c),setTimeout((()=>{i.clearRect(0,0,s.width,s.height),i.drawImage(e,0,0,s.width,s.height);const t=s.toDataURL("image/jpeg",n);d(t)}),200)})),h=await(async()=>{const e={},s=1.8*Math.max(t.width,t.length,t.height),i=t.height/2;return G.frontView&&(e.frontView=await m(0,i,s,0,i,0)),G.sideView&&(e.sideView=await m(s,i,0,0,i,0)),G.topView&&(e.topView=await m(0,1.2*s,0,0,0,0)),G.perspectiveView&&(e.perspectiveView=await m(.8*s,.6*s,.8*s,t.width/2,t.height/2,t.length/2)),G.customAngleView&&(e.customView=await m(d.position.x,d.position.y,d.position.z,0,t.height/2,0)),e})();ue.current.position.set(d.position.x,d.position.y,d.position.z),ue.current.rotation.set(d.rotation.x,d.rotation.y,d.rotation.z);const u=new p("landscape","mm","a4"),x=()=>{u.setFillColor(235,245,240),u.rect(0,0,u.internal.pageSize.getWidth(),u.internal.pageSize.getHeight(),"F")};x();const g=h.frontView;u.setDrawColor(0,75,155),u.setLineWidth(.5),u.line(10,10,u.internal.pageSize.getWidth()-10,10),u.setTextColor(0,75,155),u.setFontSize(28),u.setFont("helvetica","bold"),u.text("LUXURY",u.internal.pageSize.getWidth()/2,25,{align:"center"}),u.setFontSize(16),u.setFont("helvetica","italic"),u.text("PERGOLA DESIGNS",u.internal.pageSize.getWidth()/2,32,{align:"center"}),u.line(u.internal.pageSize.getWidth()/2-40,36,u.internal.pageSize.getWidth()/2+40,36);const b=(new Date).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});u.setFontSize(10),u.setFont("helvetica","normal"),u.setTextColor(100,100,100),u.text(`Created: ${b}`,u.internal.pageSize.getWidth()-20,15,{align:"right"});const w=180,f=s.height*w/s.width,v=(u.internal.pageSize.getWidth()-w)/2;u.setFillColor(220,220,220),u.rect(v-2,43,184,f+4,"F"),u.addImage(g,"JPEG",v,45,w,f),u.setDrawColor(0,75,155),u.setLineWidth(.3),u.rect(v,45,w,f),u.setFont("helvetica","italic"),u.setFontSize(12),u.setTextColor(80,80,80),u.text("Your Custom Pergola Design",u.internal.pageSize.getWidth()/2,45+f+8,{align:"center"}),u.addPage(),x(),u.setDrawColor(0,75,155),u.setLineWidth(.5),u.line(10,10,u.internal.pageSize.getWidth()-10,10),u.setTextColor(0,75,155),u.setFontSize(22),u.setFont("helvetica","bold"),u.text("DESIGN SPECIFICATIONS",u.internal.pageSize.getWidth()/2,25,{align:"center"}),u.line(u.internal.pageSize.getWidth()/2-50,29,u.internal.pageSize.getWidth()/2+50,29);const j=(e,t,s,i,a,n)=>{if(u.setFillColor(235,245,240),u.roundedRect(s,i,a,n,2,2,"F"),u.setFillColor(225,235,230),u.roundedRect(s,i,a,8,2,2,"F"),u.setDrawColor(0,75,155),u.setLineWidth(.2),u.roundedRect(s,i,a,n,2,2,"S"),u.setFont("helvetica","bold"),u.setFontSize(12),u.setTextColor(0,75,155),u.text(e,s+5,i+6),u.setFont("helvetica","normal"),u.setFontSize(11),u.setTextColor(60,60,60),Array.isArray(t)){let e=i+16;t.forEach((t=>{u.text(t,s+5,e),e+=6}))}else u.text(t,s+5,i+16)},y=15,N=10,k=(u.internal.pageSize.getWidth()-30-N)/2,C=40;if(j("DIMENSIONS",`Width: ${t.width.toFixed(2)}m  Height: ${t.height.toFixed(2)}m  Depth: ${t.length.toFixed(2)}m`,y,40,k,C),j("MATERIAL",[`Type: ${a.charAt(0).toUpperCase()+a.slice(1)}`,`Color: ${r}`],y+k+N,40,k,C),j("PILLARS",[`Count: ${S.count}`,`Size: ${S.size.width.toFixed(2)}m  ${S.size.depth.toFixed(2)}m`],y,90,k,C),j("RAFTERS",[`Front to Back: ${M.frontToBack.count}`,`Side to Side: ${M.leftToRight.count}`],y+k+N,90,k,C),D.visible){const e=[`Color: ${D.color}`,`Opacity: ${(100*D.opacity).toFixed(0)}%`,`Thickness: ${D.thickness.toFixed(1)} cm`],t=Object.entries(D.sides).filter((([e,t])=>t)).map((([e])=>e.charAt(0).toUpperCase()+e.slice(1))).join(", ");t&&e.push(`Visible Sides: ${t}`),j("GLASS DETAILS",e,y,140,2*k+N,50)}u.setFont("helvetica","bold"),u.setFontSize(16),u.setTextColor(0,75,155),u.text("MULTIPLE VIEWS",u.internal.pageSize.getWidth()/2,150,{align:"center"}),u.line(u.internal.pageSize.getWidth()/2-30,154,u.internal.pageSize.getWidth()/2+30,154);u.internal.pageSize.getWidth();s.height,s.width;const L=160,P=(e,t,s,i,a,n)=>{t&&(u.addImage(t,"JPEG",s,i,a,n),u.setDrawColor(0,75,155),u.setLineWidth(.2),u.rect(s,i,a,n),u.setFont("helvetica","italic"),u.setFontSize(10),u.setTextColor(80,80,80),u.text(e,s+a/2,i+n+5,{align:"center"}))},F=Object.values(h).filter(Boolean).length;let E=[];if(1===F){const e=u.internal.pageSize.getWidth()-30,t=e*s.height/s.width;E.push({x:15,y:L,width:e,height:t})}else if(2===F){const e=(u.internal.pageSize.getWidth()-40)/2,t=e*s.height/s.width;E.push({x:15,y:L,width:e,height:t},{x:15+e+10,y:L,width:e,height:t})}else{const e=(u.internal.pageSize.getWidth()-30-20)/3,t=e*s.height/s.width;if(E.push({x:15,y:L,width:e,height:t},{x:15+e+10,y:L,width:e,height:t},{x:15+2*(e+10),y:L,width:e,height:t}),F>3){const s=L+t+20;E.push({x:15+e/2,y:s,width:e,height:t},{x:15+e+10+e/2,y:s,width:e,height:t})}}let T=0;h.frontView&&T<E.length&&(P("Front View",h.frontView,E[T].x,E[T].y,E[T].width,E[T].height),T++),h.perspectiveView&&T<E.length&&(P("Perspective View",h.perspectiveView,E[T].x,E[T].y,E[T].width,E[T].height),T++),h.sideView&&T<E.length&&(P("Side View",h.sideView,E[T].x,E[T].y,E[T].width,E[T].height),T++),h.topView&&T<E.length&&(P("Top View",h.topView,E[T].x,E[T].y,E[T].width,E[T].height),T++),h.customView&&T<E.length&&(P("Custom View",h.customView,E[T].x,E[T].y,E[T].width,E[T].height),T++),se.includeWatermark&&(u.setTextColor(230,230,230),u.setFontSize(60),u.setFont("helvetica","bold"),u.save(),u.rotate(45,u.internal.pageSize.getWidth()/2,u.internal.pageSize.getHeight()/2),u.text("LUXURY",u.internal.pageSize.getWidth()/2,u.internal.pageSize.getHeight()/2,{align:"center"}),u.restore());const R=(e,t)=>{u.setFont("helvetica","normal"),u.setFontSize(8),u.setTextColor(150,150,150),u.text(`Page ${e} of ${t}`,u.internal.pageSize.getWidth()/2,u.internal.pageSize.getHeight()-10,{align:"center"}),u.text("www.luxurypergola.com",15,u.internal.pageSize.getHeight()-10),u.text("contact@luxurypergola.com | +1 (800) PERGOLA",u.internal.pageSize.getWidth()-15,u.internal.pageSize.getHeight()-10,{align:"right"})};R(1,2),R(2,2);const z=$.name?`Luxury_Pergola_Design_${$.name.replace(/\s+/g,"_")}.pdf`:"Luxury_Pergola_Design.pdf";u.save(z),setTimeout((()=>{Y(!1),q(!1)}),1e3)},Oe=e=>{b(e),Pe.recordInteraction("environment_change",{environment:e,previousEnvironment:u})},$e=e=>{Pe.recordInteraction("pergola_position_change",{previousPosition:{...k},newPosition:{...e}}),C(e)},_e=()=>({dimensions:t,material:a,materialColor:r,pillars:S,rafters:M,glass:D}),Ge=e=>{e.dimensions&&i(e.dimensions),e.material&&n(e.material),e.materialColor&&l(e.materialColor),e.pillars&&L(e.pillars),e.rafters&&P(e.rafters),e.glass&&F(e.glass)};return s.jsx(g,{mode:"wait",children:R?s.jsx(ze,{},"loading"):s.jsxs(x.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.2},className:`h-screen w-screen ${y?"bg-gradient-to-b from-gray-900 to-black":"bg-gradient-to-b from-gray-100 to-white"} text-white overflow-hidden`,children:[s.jsxs("div",{className:"h-screen flex flex-col",children:[s.jsx(Ne,{onExportClick:()=>{q(!0),Pe.trackInteraction("export_initiated",{type:"pdf"})},onToggleQuickPreview:()=>ne(!ae),onToggleWishlist:()=>le(!re),onToggleVoiceControl:()=>ce(!oe),onTogglePDFExport:()=>me(!de),darkMode:y,onToggleDarkMode:()=>{N((e=>!e)),Pe.recordInteraction("toggle_dark_mode",{newMode:y?"light":"dark"})}}),s.jsxs("div",{className:"flex h-[calc(100vh-64px)]",children:[s.jsxs(x.div,{initial:{x:-320},animate:{x:0},transition:{type:"spring",damping:30},className:"w-80 premium-panel-container",children:[s.jsxs("div",{className:"flex space-x-2 pb-4 border-b border-white/10 mb-4",children:[s.jsx("button",{onClick:()=>T("dimensions"),className:"premium-tab "+("dimensions"===E?"active":""),children:"Dimensions"}),s.jsx("button",{onClick:()=>T("materials"),className:"premium-tab "+("materials"===E?"active":""),children:"Materials"}),s.jsx("button",{onClick:()=>T("advanced"),className:"premium-tab "+("advanced"===E?"active":""),children:"Advanced"})]}),s.jsx(g,{mode:"wait",children:(()=>{switch(E){case"dimensions":return s.jsx(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.2},children:s.jsx(ke,{dimensions:t,onDimensionsChange:ge})},"dimensions");case"materials":return s.jsx(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.2},children:s.jsx(Le,{selectedMaterial:a,onMaterialChange:we,materialColor:r,onColorChange:l})},"materials");case"advanced":return s.jsx(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.2},children:s.jsxs("div",{className:"space-y-5",children:[s.jsx(Me,{pillars:S,onPillarsChange:fe}),s.jsx("div",{className:"mt-6",children:s.jsx(De,{rafters:M,onRaftersChange:Ce})}),s.jsx("div",{className:"mt-6",children:s.jsx(Fe,{glass:D,onGlassChange:Se})}),s.jsx("div",{className:"mt-6",children:s.jsx(Ee,{pergolaPosition:k,onPositionChange:$e})})]})},"advanced");default:return s.jsx(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.2},children:s.jsx(ke,{dimensions:t,onDimensionsChange:ge})},"default")}})()}),s.jsxs("button",{onClick:()=>{I((e=>!e)),Pe.recordInteraction("request_recommendations",{currentDesign:{dimensions:t,material:a,materialColor:r,pillars:S,rafters:M,glass:D,environment:u,timeOfDay:w}})},className:"button-accent w-full py-3 px-4 rounded-lg flex items-center justify-center space-x-2 transition-all mt-4",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-11a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V7z",clipRule:"evenodd"})}),s.jsx("span",{children:"AI Design Suggestions"})]})]}),s.jsxs("div",{className:"flex-1 relative",ref:xe,children:[s.jsx(o,{shadows:!0,gl:{antialias:!0,alpha:!1,powerPreference:"default",preserveDrawingBuffer:!0,depth:!0},dpr:1,onCreated:e=>{e.gl.setClearColor("#000000")},children:s.jsx(We,{children:s.jsxs(e.Suspense,{fallback:s.jsxs("mesh",{position:[0,0,0],children:[s.jsx("sphereGeometry",{args:[.5,16,16]}),s.jsx("meshStandardMaterial",{color:"#4285F4"})]}),children:[s.jsx(c,{makeDefault:!0,position:[8,8,8],fov:45,ref:ue}),s.jsx("ambientLight",{intensity:.7}),s.jsx("directionalLight",{position:[5,5,5],intensity:.8,castShadow:!0,"shadow-mapSize":[1024,1024]}),s.jsx(pe,{ref:he,dimensions:t,material:a,materialColor:r,pillars:S,rafters:M,glass:D,pergolaPosition:k,onRafterSelect:e=>{P({...M,selectedRafter:e})}}),s.jsx(d,{preset:u,background:!0}),s.jsx(m,{enablePan:!0,enableZoom:!0,enableRotate:!0})]})})}),s.jsx("div",{className:"absolute top-6 right-6 flex flex-col space-y-4",children:s.jsx(Te,{environment:u,timeOfDay:w,onEnvironmentChange:Oe,onTimeOfDayChange:e=>{f(e),Pe.recordInteraction("time_of_day_change",{timeOfDay:e,previousTimeOfDay:w})}})}),s.jsx(g,{children:B&&s.jsx(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},className:"absolute bottom-6 left-1/2 transform -translate-x-1/2 w-[600px] bg-black/50 backdrop-blur-xl p-6 rounded-xl border border-white/10",children:s.jsx(Re,{dimensions:t,material:a,onClose:()=>I(!1),materialColor:r,pillars:S,rafters:M,glass:D,onApplyRecommendation:e=>{Pe.recordInteraction("apply_recommendation",{recommendationId:e.id,category:e.category,before:{dimensions:t,material:a,materialColor:r,pillars:S,rafters:M,glass:D},after:{dimensions:e.dimensions||t,material:e.material||a,materialColor:e.materialColor||r,pillars:e.pillars||S,rafters:e.rafters||M,glass:e.glass||D}}),e.dimensions&&i(e.dimensions),e.material&&n(e.material),e.materialColor&&l(e.materialColor),e.pillars&&L(e.pillars),e.rafters&&P(e.rafters),e.glass&&F(e.glass),I(!1)}})})}),s.jsx(g,{children:U&&s.jsx(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},className:"absolute bottom-6 left-1/2 transform -translate-x-1/2 w-[600px] bg-black/50 backdrop-blur-xl p-6 rounded-xl border border-white/10",children:s.jsx(Ve,{onExport:Ae,onCancel:()=>q(!1),customerDetails:$,setCustomerDetails:_,qualitySettings:se,setQualitySettings:ie})})}),s.jsx(g,{children:X&&s.jsx(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/70",children:s.jsxs("div",{className:"bg-gray-900 rounded-xl p-6 max-w-md w-full shadow-2xl border border-white/10",children:[s.jsxs("h3",{className:"text-xl font-medium text-white mb-4",children:["Export ","pdf"===ee?"PDF":"Image"]}),s.jsx("button",{className:"absolute top-4 right-4 text-white/70 hover:text-white",onClick:()=>{K(!1)},children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),s.jsx(Be,{customerDetails:$,setCustomerDetails:_}),"pdf"===ee&&s.jsx(Ie,{selectedViews:G,setSelectedViews:H,isExporting:Q}),s.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[s.jsx("button",{className:"px-4 py-2 rounded-lg bg-white/10 text-white hover:bg-white/20 transition-colors",onClick:()=>K(!1),children:"Cancel"}),s.jsx("button",{className:"px-4 py-2 rounded-lg bg-gradient-to-r from-blue-600 to-indigo-700 text-white hover:from-blue-500 hover:to-indigo-600 flex items-center justify-center min-w-[120px]",onClick:"pdf"===ee?Ae:exportAsImage,disabled:Q,children:Q?s.jsxs(s.Fragment,{children:[s.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),s.jsx("span",{children:"Exporting..."})]}):s.jsxs("span",{children:["Export as ","pdf"===ee?"PDF":"Image"]})})]})]})})})]})]})]}),ae&&s.jsx(be,{isOpen:ae,onClose:()=>ne(!1),onApplyDesign:Ge,currentDesign:_e()}),re&&s.jsx(ve,{isOpen:re,onClose:()=>le(!1),onApplyDesign:Ge,currentDesign:_e()}),oe&&s.jsx(je,{isOpen:oe,onClose:()=>ce(!1),onCommandRecognized:e=>{"reset"===e&&(i({length:4,width:3,height:2.5}),n("aluminium"),l("#a8a8a8"),L({count:4,size:{width:.1,depth:.1}}),P({pattern:"crosshatch",frontToBack:{count:6,width:.05,height:.1},leftToRight:{count:6,width:.05,height:.1}}),F({visible:!0,applied:!0,color:"#a9c2d9",opacity:.6,sides:{top:!0,front:!1,back:!1,left:!1,right:!1}}))},onDimensionChange:ge,onMaterialChange:we,onEnvironmentChange:Oe,onGlassChange:Se,currentDesign:_e()}),de&&s.jsx(ye,{isOpen:de,onClose:()=>me(!1),currentDesign:_e(),modelRef:xe,captureScreenshot:async()=>{if(!xe.current)return null;try{const e=(await h((async()=>{const{default:e}=await import("./pdf-xEu60Z-2.js").then((e=>e.a));return{default:e}}),__vite__mapDeps([0,1]))).default;return(await e(xe.current)).toDataURL("image/png")}catch(e){return null}}})]},"main-app")})}(()=>{try{u.createRoot(document.getElementById("root")).render(s.jsx(Ae,{}))}catch(e){document.getElementById("root").innerHTML=`\n      <div style="padding: 20px; text-align: center; color: white;">\n        <h2>Something went wrong</h2>\n        <p>Please refresh the page to try again.</p>\n        <pre style="text-align: left; margin-top: 20px; font-size: 12px; color: #ff6b6b;">${e.message}</pre>\n      </div>\n    `}})();
